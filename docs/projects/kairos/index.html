

<!doctype html>
<html lang="en" class="no-js" data-bs-theme="dark">
    <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="theme" content="Hinode 0.24.0-beta3">
    





    
    
<link rel="stylesheet" href="/css/main.min.f412b77e222d0a021b3642d8343c28bf87dd3898cfe93a422a9718a0be45c640.css" integrity="sha256-9BK3fiItCgIbNkLYNDwov4fdOJjP6TpCKpcYoL5FxkA=" crossorigin="anonymous">
    
        
    
        
        <link rel="preload" href="/fonts/inter-v12-latin-regular.woff2" as="font" type="font/woff2" crossorigin>






  <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <title>Fronkon Games - Kairos</title>
    <meta name="description" content="A devblog about a game of cards and zombies">

<link rel="canonical" href="https://fronkongames.github.io/projects/kairos/">

<meta property="og:locale" content="es_ES">
<meta property="og:type" content="article">
<meta property="og:title" content="Kairos">
<meta property="og:description" content="A devblog about a game of cards and zombies">
<meta property="og:url" content="https://fronkongames.github.io/projects/kairos/">
<meta property="og:site_name" content="Fronkon Games">
<meta property="article:published_time" content="1970-01-01T01:01:40+01:00">
    <meta property="article:modified_time" content="2025-06-15T17:27:00+02:00">
    <meta property="og:image" content="https://fronkongames.github.io/img/kairos/kairos_hello-1280x640.jpg">
<meta property="og:image:alt" content="Kairos">



<meta name="twitter:card" content="summary_large_image">


<meta name="twitter:title" content="Kairos">
<meta name="twitter:description" content="A devblog about a game of cards and zombies">
<meta name="twitter:image" content="https://fronkongames.github.io/img/kairos/kairos_hello-1280x640.jpg">
<meta name="twitter:image:alt" content="Kairos">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
        "@id": "https://fronkongames.github.io/#/schema/organization/1",
      "name": "Fronkon Games",
      "url": "https://fronkongames.github.io/",
      "sameAs": [
        "https://x.com/fronkongames"
        , "https://www.linkedin.com/in/martinbr"
        , "https://github.com/FronkonGames"
        ],
      "image": {
          "@type": "ImageObject",
          "@id": "https://fronkongames.github.io/#/schema/image/1",
          "url": "https://fronkongames.github.io/\u003cnil\u003e",
          "width": null ,
          "height": null ,
          "caption": "Fronkon Games"
        }
      },
    {
      "@type": "WebSite",
      "@id": "https://fronkongames.github.io/#/schema/website/1",
      "url": "https://fronkongames.github.io/",
      "name": "Fronkon Games",
      "description": "Hi! I\u0027m Martin Bustos, an indie game developer and asset store publisher",
      "publisher": {
          "@id": "https://fronkongames.github.io/#/schema/organization/1"
        }
      },
    {
      "@type": "WebPage",
      "@id": "https://fronkongames.github.io/projects/kairos/",
      "url": "https://fronkongames.github.io/projects/kairos/",
      "name": "Kairos",
      "description": "A devblog about a game of cards and zombies",
      "isPartOf": {
        "@id": "https://fronkongames.github.io/#/schema/website/1"
      },
      "about": {
          "@id": "https://fronkongames.github.io/#/schema/organization/1"
        },
      "datePublished": "1970-01-01T01:01:40CET",
      "dateModified": "2025-06-15T17:27:00CET",
      "breadcrumb": {
        "@id": "https://fronkongames.github.io/projects/kairos/#/schema/breadcrumb/1"
      },
      "primaryImageOfPage": {
        "@id": "https://fronkongames.github.io/projects/kairos/#/schema/image/2"
      },
      "inLanguage": "es-ES",
      "potentialAction": [{
        "@type": "ReadAction", "target": ["https://fronkongames.github.io/projects/kairos/"]
      }]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://fronkongames.github.io/projects/kairos/#/schema/breadcrumb/1",
      "name": "Breadcrumbs",
      "itemListElement": [{
        "@type": "ListItem",
        "position":  1 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://fronkongames.github.io/",
          "url": "https://fronkongames.github.io/",
          "name": "Home"
          }
        },{
        "@type": "ListItem",
        "position":  2 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://fronkongames.github.io/projects/",
          "url": "https://fronkongames.github.io/projects/",
          "name": "Projects"
          }
        },{
        "@type": "ListItem",
        "position":  3 ,
        "item": {
          "@id": "https://fronkongames.github.io/projects/kairos/"
          }
        }]
    },

    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "ImageObject",
          "@id": "https://fronkongames.github.io/projects/kairos/#/schema/image/2",
          "url": "https://fronkongames.github.io/img/kairos/kairos_hello-1280x640.jpg",
          "contentUrl": "https://fronkongames.github.io/img/kairos/kairos_hello-1280x640.jpg",
          "caption": "Kairos"
        }
      ]
    }

  ]
}
</script>

    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon_hu6d8cf4f9ec6d53de5a2189901820c862_195725_16x16_resize_catmullrom_3.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon_hu6d8cf4f9ec6d53de5a2189901820c862_195725_32x32_resize_catmullrom_3.png">
        <link rel="icon" type="image/png" sizes="48x48" href="/img/favicon_hu6d8cf4f9ec6d53de5a2189901820c862_195725_48x48_resize_catmullrom_3.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon_hu6d8cf4f9ec6d53de5a2189901820c862_195725_180x0_resize_catmullrom_3.png">
    


        <link rel="stylesheet" href="/css/custom-effects.css">
    </head>

    <body>
<script src="/js/critical.bundle.min.57fd662a1eb64879c3dcc7ac7c5f7b312c030b3939273e3b14b385d824f9458c.js" integrity="sha256-V/1mKh62SHnD3MesfF97MSwDCzk5Jz47FLOF2CT5RYw=" crossorigin="anonymous"></script>
      <script data-goatcounter="https://fronkongames.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><div class="d-flex flex-column min-vh-100">
            <div class="d-flex flex-column ">










<div class="container-fluid fixed-top p-0">






<nav class="navbar p-4 bg-body navbar-fixed-top navbar-expand-md"
        
        
        >
        <div class="container-xxl p-0">
            <div class="d-flex navbar-container justify-content-center">
                
                <div class="d-flex align-items-center">
                        <button class="navbar-toggler collapsed p-0 mx-auto invisible fw-30" type="button">









    

    <!-- <i class="fas fa-ellipsis fa-fw"></i> --><svg class="svg-inline--fa fas fa-ellipsis fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 448 512"><path d="M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"/></svg>

    
</button></div>
        
                
                <div class="mx-auto">
                    <a class="navbar-brand" href="/" aria-label="Home">
                            <img src="/img/logo_icon.png" alt="Fronkon Games" height="40"></a>
                </div>
        
                
                <div class="d-flex align-items-center">
                    <button class="navbar-toggler main-nav-toggler collapsed p-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-0-collapse"
                        aria-controls="navbar-0" aria-expanded="false" aria-label="Toggle main navigation">
                        <span class="toggler-icon top-bar emphasis"></span>
                        <span class="toggler-icon middle-bar emphasis"></span>
                        <span class="toggler-icon bottom-bar emphasis"></span>
                    </button>
                </div>
            </div>
    
            <div class="navbar-collapse collapse" id="navbar-0-collapse">
                <div class="d-flex flex-fill ms-md-3">
    <form class="search flex-fill position-relative me-auto">
        <input class="search-input form-control is-search" type="search" placeholder="Search this site" aria-label="Search this site" autocomplete="off">
        <div class="search-suggestions shadow bg-body rounded d-none" data-no-results="No results for"></div>
    </form>
</div>

                <ul class="navbar-nav ms-auto">

                        <li class="nav-item">








    <a class="nav-link" 
        
        data-nav="main" data-nav-main="store" 
        href="/store/" ><strong><span >STORE</span></strong>&nbsp;</a>
</li>

                        <li class="nav-item">








    <a class="nav-link active" 
        
        data-nav="main" data-nav-main="projects" 
        href="/projects/" ><strong><span  class="active">PROJECTS</span></strong>&nbsp;</a>
</li>

                        <li class="nav-item">








    <a class="nav-link" 
        
        data-nav="main" data-nav-main="blog" 
        href="/blog/" ><strong><span >BLOG</span></strong>&nbsp;</a>
</li>
                    

                    </ul>
            </div>
        </div>
    </nav>
</div>

<div class="main-content">
                    </div>

                
            </div>
            
                
    

    
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvass-sidebar" aria-inledby="offcanvas-label">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvas-label">Projects</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                

            </div>
        </div>
    

    <div class="container-xxl flex-fill p-4 px-xxl-0">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3">
                <div class="col col-lg-2 d-none d-lg-block sidebar-overflow sticky-top pt-5">
                    

                </div>
                <div class="col-12 col-md-9 col-lg-8 mb-5 p-4">
                    










    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                
                    <li class="breadcrumb-item"><a href="/projects/">Projects</a></li>
                <li class="breadcrumb-item active" aria-current="page">Kairos</li>
        </ol>
    </nav>

    








<div class="d-md-none pb-5">






<div class="d-grid gap-2 mx-auto">
        









    

    <a aria-label="On this page"
        href="#toc-collapse" class="btn btn-outline-secondary  position-relative  toc-button"
         data-bs-toggle="collapse" aria-expanded="false" aria-controls="toc-collapse"role="button"
        >
        <div class="d-flex justify-content-between">
            <div class="my-auto">On this page</div><div class="align-self-center ps-1">









    

    <!-- <i class="fas fa-sort "></i> --><svg class="svg-inline--fa fas fa-sort " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 320 512"><path d="M137.4 41.4c12.5-12.5 32.8-12.5 45.3 0l128 128c9.2 9.2 11.9 22.9 6.9 34.9s-16.6 19.8-29.6 19.8H32c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128zm0 429.3l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8H288c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128c-12.5 12.5-32.8 12.5-45.3 0z"/></svg>

    
</div>
        </div></a>
</div>

    <div class="collapse border bg-body-tertiary rounded p-1 navbar-nav-scroll" id="toc-collapse">
        <div class="toc toc-panel text-body p-2">
            <small><nav id="TableOfContents">
  <ul>
    <li><a href="#hello_everybody">Hello Everybody! 🧟</a></li>
    <li><a href="#making_a_3d_card_in_blender">Making A 3D Card In Blender 🃏</a></li>
    <li><a href="#rendering_a_card">Rendering A Card 🖌️</a></li>
    <li><a href="#drag_and_drop_cards">Drag &amp; Drop Cards 🃏</a></li>
  </ul>
</nav></small>
        </div>
    </div>
</div>














        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
    
    






    
        
        
    






<div class="img-wrap mb-5"><img class="img-fluid rounded"
            src="/img/kairos/kairos_hello-2800x2100.jpg"
            
            fetchpriority="high"
            srcset="/img/kairos/kairos_hello-576x432.webp 576w, /img/kairos/kairos_hello-768x576.webp 768w, /img/kairos/kairos_hello-992x744.webp 992w, /img/kairos/kairos_hello-1200x900.webp 1200w, /img/kairos/kairos_hello-1400x1050.webp 1400w, /img/kairos/kairos_hello-2800x2100.webp 2800w" sizes="100vw"
            height="2100"
            width="2800"
            alt="Kairos">
</div><br><ul>
<li><a href="/projects/kairos/#hello_everybody">Hello Everybody!</a></li>
<li><a href="/projects/kairos/#making_a_3d_card_in_blender">Making a 3D card in Blender</a></li>
<li><a href="/projects/kairos/#rendering_a_card">Rendering A Card</a></li>
<li><a href="/projects/kairos/#drag_and_drop_cards">Drag &amp; Drop Cards</a></li>
</ul>
<hr />

<h2 id="hello_everybody" class="heading">Hello Everybody! 🧟 <a href="#hello_everybody" aria-labelledby="hello_everybody">









    

    <!-- <i class="fas fa-link anchor"></i> --><svg class="svg-inline--fa fas fa-link anchor" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg>

    &nbsp;
</a></h2>
<p>Hi I&rsquo;m <strong>Martin Bustos</strong> and I&rsquo;ve been developing games for more than two decades for PC, consoles, online, etc (you can check the list in my <a href="https://github.com/FronkonGames">GitHub</a> profile). I&rsquo;ve worked in several videogame companies and even co-founded two of them.</p>
<p>I recently decided to leave the corporate environment and dedicate myself to making games that I feel like making and playing! Here I will be recording the progress of my first game as an indie developer: &lsquo;<strong>Kairos</strong>&rsquo; (<em>codename</em>).</p>
<p>The game engine will be <a href="https://unity.com/">Unity</a> and I will build a modular framework to use it in future projects. This framework, which I&rsquo;ve called &lsquo;<strong>Game:Work</strong>&rsquo;, is available on my <a href="https://github.com/FronkonGames">GitHub</a> under <a href="https://github.com/FronkonGames/GameWork-Core/blob/main/LICENSE.md">MIT License</a>.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/gamework_logo-2800x1400.jpg"
            
            
            srcset="/img/kairos/gamework_logo-576x288.webp 576w, /img/kairos/gamework_logo-768x384.webp 768w, /img/kairos/gamework_logo-992x496.webp 992w, /img/kairos/gamework_logo-1200x600.webp 1200w, /img/kairos/gamework_logo-1400x700.webp 1400w, /img/kairos/gamework_logo-2800x1400.webp 2800w" sizes="100vw"
            height="1400"
            width="2800"
            >
</div><br>
<p>The pilars of &lsquo;<strong>Game:Work</strong>&rsquo; is formed by two parts, the first &lsquo;<a href="https://github.com/FronkonGames/GameWork-Foundation">Foundation</a>&rsquo; is a set of utilities and code extensions useful for game development. It has no architecture, so it can be used on any project. All its functions are supported by <a href="https://docs.unity3d.com/Manual/testing-editortestsrunner.html">Unit Tests</a>.</p>
<p>On top of this is &lsquo;<a href="https://github.com/FronkonGames/GameWork-Core">Core</a>&rsquo; which is where the architecture of &lsquo;<strong>Game:Work</strong>&rsquo; is implemented, building on modularity, events and dependency injection.</p>
<p>With modules you can add functionality to &lsquo;<strong>Game:Work</strong>&rsquo;. Some of the ones I am developing are:</p>
<ul>
<li><a href="https://github.com/FronkonGames/GameWork-Scene">Scene</a>: async scene loading.</li>
<li><a href="https://github.com/FronkonGames/GameWork-Local-Data">Local Data</a>: async load / save local data with compression, encryption and integrity check.</li>
<li><a href="https://github.com/FronkonGames/GameWork-Tween">Tween</a>: tween / easing.</li>
</ul>
<p>A big part of the project I hope to separate it into modules and those that are useful for further development I will publish them with the same framework license.</p>
<p class="h4">Until next time&hellip; 







    <span class="badge text-bg-secondary">stay gamedev, stay awesome!</span>
    <br><br>
</p>
<hr />

<h2 id="making_a_3d_card_in_blender" class="heading">Making A 3D Card In Blender 🃏 <a href="#making_a_3d_card_in_blender" aria-labelledby="making_a_3d_card_in_blender">









    

    <!-- <i class="fas fa-link anchor"></i> --><svg class="svg-inline--fa fas fa-link anchor" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg>

    &nbsp;
</a></h2>
<p>The first thing a card game needs is&hellip; cards.</p>
<p>And why in 3D? It would be <em>easier</em> to do it in 2D, but to have more options in terms of effects and also to differentiate from the rest I decided that my card game would be 3D.</p>
<p>I was going to need a 3D editor, and in my modest opinion <a href="https://www.blender.org/">Blender</a> is unbeatable in quality / price.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/blender-2800x1596.jpg"
            
            
            srcset="/img/kairos/blender-576x328.webp 576w, /img/kairos/blender-768x438.webp 768w, /img/kairos/blender-992x565.webp 992w, /img/kairos/blender-1200x684.webp 1200w, /img/kairos/blender-1400x798.webp 1400w, /img/kairos/blender-2800x1596.webp 2800w" sizes="100vw"
            height="1596"
            width="2800"
            >
</div><br>
<p>Once installed, in an empty scene, I added a plane using the menu &lsquo;<strong>Add &gt; Mesh &gt; Plane</strong>&rsquo;.<br />
To make it easier to handle, I set the top camera by pressing &lsquo;<strong>7</strong>&rsquo; on the numeric pad.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/plane-2800x2233.jpg"
            
            
            srcset="/img/kairos/plane-576x459.webp 576w, /img/kairos/plane-768x612.webp 768w, /img/kairos/plane-992x791.webp 992w, /img/kairos/plane-1200x957.webp 1200w, /img/kairos/plane-1400x1117.webp 1400w, /img/kairos/plane-2800x2233.webp 2800w" sizes="100vw"
            height="2233"
            width="2800"
            >
</div><br>
<p>There is no standard size for a card. A Bridge card measures 57.15 x 88.9 mm, while a Poker card measures 62 x 88 mm. This size is known as <a href="https://formaty.info/en/B8/">B8 in ISO 216</a>. Since it is the best known, it is the size I will use.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-6 mx-auto"><img class="img-fluid "
            src="/img/kairos/b8-2800x3721.jpg"
            
            
            srcset="/img/kairos/b8-576x766.webp 576w, /img/kairos/b8-768x1021.webp 768w, /img/kairos/b8-992x1318.webp 992w, /img/kairos/b8-1200x1595.webp 1200w, /img/kairos/b8-1400x1861.webp 1400w, /img/kairos/b8-2800x3721.webp 2800w" sizes="100vw"
            height="3721"
            width="2800"
            >
</div><br>
<p>However, I am not really interested in the size itself, but in the ratio between width and height or <em>aspect ratio</em>. In the case case of a Poker card is <strong>0.7</strong> (62 / 88).</p>
<p>To achieve that <em>aspect ratio</em>, with the plane selected, press &lsquo;<strong>S</strong>&rsquo; and then &lsquo;<strong>X</strong>&rsquo;, and typing &lsquo;<strong>0.7</strong>&rsquo; (62 / 88) will get the <em>aspect ratio</em> I&rsquo;m looking for.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/plane_07-2800x2923.jpg"
            
            
            srcset="/img/kairos/plane_07-576x601.webp 576w, /img/kairos/plane_07-768x802.webp 768w, /img/kairos/plane_07-992x1035.webp 992w, /img/kairos/plane_07-1200x1253.webp 1200w, /img/kairos/plane_07-1400x1461.webp 1400w, /img/kairos/plane_07-2800x2923.webp 2800w" sizes="100vw"
            height="2923"
            width="2800"
            >
</div><br>
<p>To round corners I use the &lsquo;<strong>Bevel</strong>&rsquo; modifier.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/card_bevel-2800x2282.jpg"
            
            
            srcset="/img/kairos/card_bevel-576x469.webp 576w, /img/kairos/card_bevel-768x626.webp 768w, /img/kairos/card_bevel-992x808.webp 992w, /img/kairos/card_bevel-1200x978.webp 1200w, /img/kairos/card_bevel-1400x1141.webp 1400w, /img/kairos/card_bevel-2800x2282.webp 2800w" sizes="100vw"
            height="2282"
            width="2800"
            >
</div><br>
<p>And to give it a little thickness the modifier &lsquo;<strong>Solidify</strong>&rsquo;.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/card_solidify-2800x1575.jpg"
            
            
            srcset="/img/kairos/card_solidify-576x324.webp 576w, /img/kairos/card_solidify-768x432.webp 768w, /img/kairos/card_solidify-992x558.webp 992w, /img/kairos/card_solidify-1200x675.webp 1200w, /img/kairos/card_solidify-1400x788.webp 1400w, /img/kairos/card_solidify-2800x1575.webp 2800w" sizes="100vw"
            height="1575"
            width="2800"
            >
</div><br>
<p>Now I applied all the transformations pressing &lsquo;<strong>Ctrl+A</strong>&rsquo;, so that the scale of the final geometry is 1.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/transform-2800x2489.jpg"
            
            
            srcset="/img/kairos/transform-576x512.webp 576w, /img/kairos/transform-768x683.webp 768w, /img/kairos/transform-992x882.webp 992w, /img/kairos/transform-1200x1067.webp 1200w, /img/kairos/transform-1400x1244.webp 1400w, /img/kairos/transform-2800x2489.webp 2800w" sizes="100vw"
            height="2489"
            width="2800"
            >
</div><br>
<p>And the modifiers.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/apply-2800x1915.jpg"
            
            
            srcset="/img/kairos/apply-576x394.webp 576w, /img/kairos/apply-768x525.webp 768w, /img/kairos/apply-992x678.webp 992w, /img/kairos/apply-1200x821.webp 1200w, /img/kairos/apply-1400x957.webp 1400w, /img/kairos/apply-2800x1915.webp 2800w" sizes="100vw"
            height="1915"
            width="2800"
            >
</div><br>
<p>It was time for the materials. But first I created some UV coordinates in the &lsquo;<strong>UV Editing</strong>&rsquo; tab and selecting a <em>cube projection</em>.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/uv-2800x2268.jpg"
            
            
            srcset="/img/kairos/uv-576x467.webp 576w, /img/kairos/uv-768x622.webp 768w, /img/kairos/uv-992x804.webp 992w, /img/kairos/uv-1200x972.webp 1200w, /img/kairos/uv-1400x1134.webp 1400w, /img/kairos/uv-2800x2268.webp 2800w" sizes="100vw"
            height="2268"
            width="2800"
            >
</div><br>
<p>As its name indicates, this tool creates the coordinates by projecting a cube on the model.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-10 mx-auto"><img class="img-fluid "
            src="/img/kairos/cube_uv-2800x1868.jpg"
            
            
            srcset="/img/kairos/cube_uv-576x384.webp 576w, /img/kairos/cube_uv-768x512.webp 768w, /img/kairos/cube_uv-992x662.webp 992w, /img/kairos/cube_uv-1200x801.webp 1200w, /img/kairos/cube_uv-1400x934.webp 1400w, /img/kairos/cube_uv-2800x1868.webp 2800w" sizes="100vw"
            height="1868"
            width="2800"
            >
</div><br>
<p>It may not be the best option for rounded edges, but it is the easiest one. You can adjust the coordinates by hand using the window on the left.</p>
<p>In the &lsquo;<strong>Shading</strong>&rsquo; tab, I created three materials: &lsquo;FrontFace&rsquo;, &lsquo;BackFace&rsquo; and &lsquo;Border&rsquo;. I selected the front face and the &lsquo;FrontFace<br />
the &lsquo;FrontFace&rsquo; material, and clicked the &lsquo;<strong>Assign</strong>&rsquo; button to associate them.</p>
<p>With &lsquo;<strong>CONTROL + 7</strong>&rsquo; I switched to the back view and performed a similar operation.</p>
<p>To assign the border material, select the two faces and invert the selection.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/assign-2800x2370.jpg"
            
            
            srcset="/img/kairos/assign-576x487.webp 576w, /img/kairos/assign-768x650.webp 768w, /img/kairos/assign-992x839.webp 992w, /img/kairos/assign-1200x1016.webp 1200w, /img/kairos/assign-1400x1185.webp 1400w, /img/kairos/assign-2800x2370.webp 2800w" sizes="100vw"
            height="2370"
            width="2800"
            >
</div><br>
<p>Now it was only left to export to FBX to the Unity project.</p>
<p>The only change I made in the export options was in &lsquo;<strong>Apply Scalings</strong>&rsquo;, which I set to &lsquo;<strong>FBX Units Scale</strong>&rsquo; so that in Unity would export the scale correctly.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-6 mx-auto"><img class="img-fluid "
            src="/img/kairos/export-2800x3438.jpg"
            
            
            srcset="/img/kairos/export-576x707.webp 576w, /img/kairos/export-768x943.webp 768w, /img/kairos/export-992x1218.webp 992w, /img/kairos/export-1200x1473.webp 1200w, /img/kairos/export-1400x1719.webp 1400w, /img/kairos/export-2800x3438.webp 2800w" sizes="100vw"
            height="3438"
            width="2800"
            >
</div><br>
<p class="h4">Until next time&hellip; 







    <span class="badge text-bg-secondary">stay gamedev, stay awesome!</span>
    <br><br>
</p>
<p class="h4">




















    

    <!-- <i class="fas fa-download "></i> --><svg class="svg-inline--fa fas fa-download " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 512 512"><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>

    &nbsp;
<a href="/img/kairos/card.blend">Blender scene</a></p>
<hr />

<h2 id="rendering_a_card" class="heading">Rendering A Card 🖌️ <a href="#rendering_a_card" aria-labelledby="rendering_a_card">









    

    <!-- <i class="fas fa-link anchor"></i> --><svg class="svg-inline--fa fas fa-link anchor" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg>

    &nbsp;
</a></h2>
<center>
<video src="./rendering_a_card/promo.mp4" type="video/mp4" loop="false" preload="auto" autoplay  class="video-shortcode">
  There should have been a video here but your browser does not seem to support it.
</video>

</center>
<br>










    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            All art in this post have been generated by an AI and do not represent the final style of the game
        </div>
    </div>
<p>As we saw in the <a href="/projects/kairos/#making_a_3d_card_in_blender">previous post</a>, each card has three materials:</p>
<ul>
<li><strong>FrontFace</strong>: the face where all the important information and the image representing the card will be.</li>
<li><strong>BackFace</strong>: the face that will be seen when the card is face down.</li>
<li><strong>Border</strong>: the border material of the card.</li>
</ul>
<p>To be able to adjust to the maximum each one of these materials, I will create three custom shaders using the pipeline that the game will use: &lsquo;<a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@12.1/manual/index.html">Universal RP</a>&rsquo;, specifically version 12.1.</p>
<p>The simplest shader of the three is the one that is in charge of drawing the border of the card, which only has to draw one color:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">Shader</span> <span class="s">&#34;Card/Border&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Properties are options set per material,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// exposed by the material inspector.</span>
</span></span><span class="line"><span class="cl">  <span class="n">Properties</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// [MainColor] allow Material.color to use the correct properties.</span>
</span></span><span class="line"><span class="cl"><span class="na">    [MainColor]</span> <span class="n">_BaseColor</span><span class="p">(</span><span class="s">&#34;Base Color&#34;</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Subshaders allow for different behaviour and options for</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// different pipelines and platforms.</span>
</span></span><span class="line"><span class="cl">  <span class="n">SubShader</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// These tags are shared by all passes in this sub shader.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Tags</span> <span class="p">{</span> <span class="s">&#34;RenderType&#34;</span> <span class="p">=</span> <span class="s">&#34;Opaque&#34;</span> <span class="s">&#34;Queue&#34;</span> <span class="p">=</span> <span class="s">&#34;Geometry&#34;</span> <span class="s">&#34;RenderPipeline&#34;</span> <span class="p">=</span> <span class="s">&#34;UniversalPipeline&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Shaders can have several passes which are used to render</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// different data about the material. Each pass has it&#39;s own</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// vertex and fragment function and shader variant keywords.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Pass</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Begin HLSL code</span>
</span></span><span class="line"><span class="cl">      <span class="n">HLSLPROGRAM</span>
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      <span class="c1">// Register our programmable stage functions.</span>
</span></span><span class="line"><span class="cl">      <span class="cp">#pragma</span> <span class="n">vertex</span> <span class="n">vert</span>
</span></span><span class="line"><span class="cl">      <span class="cp">#pragma</span> <span class="n">fragment</span> <span class="n">frag</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// Include basics URP functions.</span>
</span></span><span class="line"><span class="cl">      <span class="err">#</span><span class="n">include</span> <span class="s">&#34;Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// This attributes struct receives data about the mesh we&#39;re</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// currently rendering. Data is automatically placed in</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// fields according to their semantic.</span>
</span></span><span class="line"><span class="cl">      <span class="k">struct</span> <span class="nc">Attributes</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">float4</span> <span class="n">vertex</span> <span class="p">:</span> <span class="n">POSITION</span><span class="p">;</span>  <span class="c1">// Position in object space.</span>
</span></span><span class="line"><span class="cl">      <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// This struct is output by the vertex function and input to</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// the fragment function. Note that fields will be</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// transformed by the intermediary rasterization stage.</span>
</span></span><span class="line"><span class="cl">      <span class="k">struct</span> <span class="nc">Varyings</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// This value should contain the position in clip space (which</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// is similar to a position on screen) when output from the</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// vertex function. It will be transformed into pixel position</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// of the current fragment on the screen when read from</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// the fragment function.      </span>
</span></span><span class="line"><span class="cl">        <span class="n">float4</span> <span class="n">position</span> <span class="p">:</span> <span class="n">SV_POSITION</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="n">half4</span> <span class="n">_BaseColor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// The vertex function. This runs for each vertex on the mesh. It</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// must output the position on the screen each vertex should</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// appear at, as well as any data the fragment function will need.</span>
</span></span><span class="line"><span class="cl">      <span class="n">Varyings</span> <span class="n">vert</span><span class="p">(</span><span class="n">Attributes</span> <span class="n">input</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Varyings</span> <span class="n">output</span> <span class="p">=</span> <span class="p">(</span><span class="n">Varyings</span><span class="p">)</span><span class="m">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">// These helper functions transform object space values into</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// world and clip space.        </span>
</span></span><span class="line"><span class="cl">        <span class="kd">const</span> <span class="n">VertexPositionInputs</span> <span class="n">positionInputs</span> <span class="p">=</span> <span class="n">GetVertexPositionInputs</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">vertex</span><span class="p">.</span><span class="n">xyz</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">// Pass position data to the fragment function.</span>
</span></span><span class="line"><span class="cl">        <span class="n">output</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">positionInputs</span><span class="p">.</span><span class="n">positionCS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">output</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// The fragment function. This runs once per fragment, which</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// you can think of as a pixel on the screen. It must output</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// the final color of this pixel.</span>
</span></span><span class="line"><span class="cl">      <span class="n">half4</span> <span class="n">frag</span><span class="p">(</span><span class="kd">const</span> <span class="n">Varyings</span> <span class="n">input</span><span class="p">)</span> <span class="p">:</span> <span class="n">SV_Target</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">_BaseColor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="n">ENDHLSL</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>To check that everything goes well, I will create three materials with the above shader, each one of a color and assign it to each material on the card.</p>
<center>
  <img src="./rendering_a_card/rgb.gif" width="100%" height="100%"/>
</center>
<br>
<p>It looks like everything is correct.</p>
<p>The next shader in difficulty would be the one for the back face. In it I want to mix two textures, one for the background image and another one as a frame.</p>
<p>The texture of the frame must have a transparent zone (alpha equal to 0) that allows to see the background texture.</p>

<center>
<table>
<thead>
<tr>
<th align="center">Background</th>
<th align="center">Frame</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img alt="Background" src="/projects/kairos/rendering_a_card/backface.png" title="Background"></td>
<td align="center"><img alt="Frame" src="/projects/kairos/rendering_a_card/backframe.png" title="Frame"></td>
</tr>
</tbody>
</table>

</center><br>
<p>To mix, or more precisely <em>interpolate</em>, both pixels I will use the function <a href="https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-lerp">lerp(x, y, s)</a>, which returns <em>x</em> if <em>s</em> is 0, <em>y</em> if <em>s</em> is 1 and a linearly interpolated value between <em>x</em> and <em>y</em> if the value of <em>s</em> is between 0 and 1.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">half3</span> <span class="n">pixel</span> <span class="p">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">a</span><span class="p">);</span></span></span></code></pre></div></div><p>In this way if the transparency of the frame is 0, you will see the image, otherwise you will see the frame. And if it is something in between, we will see a mix between the two images.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/back-2800x4631.jpg"
            
            
            srcset="/img/kairos/back-576x953.webp 576w, /img/kairos/back-768x1270.webp 768w, /img/kairos/back-992x1641.webp 992w, /img/kairos/back-1200x1985.webp 1200w, /img/kairos/back-1400x2315.webp 1400w, /img/kairos/back-2800x4631.webp 2800w" sizes="100vw"
            height="4631"
            width="2800"
            >
</div><br>
<p>This new shader would look like this.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">Shader</span> <span class="s">&#34;Card/Back Side&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">Properties</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// [MainTexture] allow Material.mainTexture to use</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// the correct properties.</span>
</span></span><span class="line"><span class="cl"><span class="na">    [MainTexture]</span> <span class="n">_BaseMap</span><span class="p">(</span><span class="s">&#34;Image (RGB)&#34;</span><span class="p">,</span> <span class="m">2D</span><span class="p">)</span> <span class="p">=</span> <span class="s">&#34;white&#34;</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">_FrameTex</span><span class="p">(</span><span class="s">&#34;Frame (RGBA)&#34;</span><span class="p">,</span> <span class="m">2D</span><span class="p">)</span> <span class="p">=</span> <span class="s">&#34;white&#34;</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="n">_FrameColor</span><span class="p">(</span><span class="s">&#34;Frame Color&#34;</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">SubShader</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Tags</span> <span class="p">{</span> <span class="s">&#34;RenderType&#34;</span> <span class="p">=</span> <span class="s">&#34;Opaque&#34;</span> <span class="s">&#34;Queue&#34;</span> <span class="p">=</span> <span class="s">&#34;Geometry&#34;</span> <span class="s">&#34;RenderPipeline&#34;</span> <span class="p">=</span> <span class="s">&#34;UniversalPipeline&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Pass</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">HLSLPROGRAM</span>
</span></span><span class="line"><span class="cl">      <span class="cp">#pragma</span> <span class="n">vertex</span> <span class="n">vert</span>
</span></span><span class="line"><span class="cl">      <span class="cp">#pragma</span> <span class="n">fragment</span> <span class="n">frag</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="err">#</span><span class="n">include</span> <span class="s">&#34;Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="err">#</span><span class="n">include</span> <span class="s">&#34;Packages/com.unity.render-pipelines.universal/ShaderLibrary/SurfaceInput.hlsl&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">struct</span> <span class="nc">Attributes</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">float4</span> <span class="n">vertex</span> <span class="p">:</span> <span class="n">POSITION</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">float2</span> <span class="n">uv</span>     <span class="p">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span> <span class="c1">// Material texture UVs.</span>
</span></span><span class="line"><span class="cl">      <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">struct</span> <span class="nc">Varyings</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">float4</span> <span class="n">position</span> <span class="p">:</span> <span class="n">SV_POSITION</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">float2</span> <span class="n">uv</span>       <span class="p">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span> <span class="c1">// Material texture UVs.</span>
</span></span><span class="line"><span class="cl">      <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// This is automatically set by Unity.</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Used in TRANSFORM_TEX to apply UV tiling.</span>
</span></span><span class="line"><span class="cl">      <span class="n">float4</span> <span class="n">_BaseMap_ST</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// Defines the Frame texture, sampler and color.</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// _BaseMap is already defined in SurfaceInput.hlsl.</span>
</span></span><span class="line"><span class="cl">      <span class="n">TEXTURE2D</span><span class="p">(</span><span class="n">_FrameTex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">SAMPLER</span><span class="p">(</span><span class="n">sampler_FrameTex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">float4</span> <span class="n">_FrameColor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      <span class="n">Varyings</span> <span class="n">vert</span><span class="p">(</span><span class="n">Attributes</span> <span class="n">input</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Varyings</span> <span class="n">output</span> <span class="p">=</span> <span class="p">(</span><span class="n">Varyings</span><span class="p">)</span><span class="m">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kd">const</span> <span class="n">VertexPositionInputs</span> <span class="n">positionInputs</span> <span class="p">=</span> <span class="n">GetVertexPositionInputs</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">vertex</span><span class="p">.</span><span class="n">xyz</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">output</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">positionInputs</span><span class="p">.</span><span class="n">positionCS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">output</span><span class="p">.</span><span class="n">uv</span> <span class="p">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">uv</span><span class="p">,</span> <span class="n">_BaseMap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">output</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="n">half4</span> <span class="n">frag</span><span class="p">(</span><span class="n">Varyings</span> <span class="n">input</span><span class="p">)</span> <span class="p">:</span> <span class="n">SV_Target</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Sample the textures.</span>
</span></span><span class="line"><span class="cl">        <span class="kd">const</span> <span class="n">half4</span> <span class="n">image</span> <span class="p">=</span> <span class="n">SAMPLE_TEXTURE2D</span><span class="p">(</span><span class="n">_BaseMap</span><span class="p">,</span> <span class="n">sampler_BaseMap</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kd">const</span> <span class="n">half4</span> <span class="n">frame</span> <span class="p">=</span> <span class="n">SAMPLE_TEXTURE2D</span><span class="p">(</span><span class="n">_FrameTex</span><span class="p">,</span> <span class="n">sampler_FrameTex</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">uv</span><span class="p">)</span> <span class="p">*</span> <span class="n">_FrameColor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Interpolates between image and frame according</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// to the transparency of the frame.</span>
</span></span><span class="line"><span class="cl">        <span class="n">half4</span> <span class="n">pixel</span> <span class="p">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">pixel</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="n">ENDHLSL</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>The shader for the front part of the card, in a first version, is similar to the previous one but with another layer. It consists of three layers, that from more to less depth are:</p>
<ul>
<li><strong>Background</strong>: the background of the card.</li>
<li><strong>Image</strong>: the image that represents the card.</li>
<li><strong>Frame</strong>: the border of the card.</li>
</ul>

<center>
<table>
<thead>
<tr>
<th align="center">Background</th>
<th align="center">Image</th>
<th align="center">Frame</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><img alt="Background" src="/projects/kairos/rendering_a_card/background.png" title="Background"></td>
<td align="center"><img alt="Image" src="/projects/kairos/rendering_a_card/image.png" title="Image"></td>
<td align="center"><img alt="Frame" src="/projects/kairos/rendering_a_card/frontframe.png" title="Frame"></td>
</tr>
</tbody>
</table>

</center><br>
<p>In addition to defining the new texture, in the &lsquo;frag&rsquo; function you will have to add one more &lsquo;<strong>lerp</strong>&rsquo;:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="c1">// Sample the textures.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="n">half4</span> <span class="n">image</span> <span class="p">=</span> <span class="n">SAMPLE_TEXTURE2D</span><span class="p">(</span><span class="n">_BaseMap</span><span class="p">,</span> <span class="n">sampler_BaseMap</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="n">half4</span> <span class="n">background</span> <span class="p">=</span> <span class="n">SAMPLE_TEXTURE2D</span><span class="p">(</span><span class="n">_BackgroundTex</span><span class="p">,</span> <span class="n">sampler_BackgroundTex</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="n">half4</span> <span class="n">frame</span> <span class="p">=</span> <span class="n">SAMPLE_TEXTURE2D</span><span class="p">(</span><span class="n">_FrameTex</span><span class="p">,</span> <span class="n">sampler_FrameTex</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Interpolates between image and background according to</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// the transparency of the frame.</span>
</span></span><span class="line"><span class="cl">  <span class="n">half4</span> <span class="n">pixel</span> <span class="p">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">background</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">image</span><span class="p">.</span><span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// And the result is interpolated with the frame</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// transparency.</span>
</span></span><span class="line"><span class="cl">  <span class="n">pixel</span> <span class="p">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">pixel</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">pixel</span><span class="p">;</span></span></span></code></pre></div></div>



















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/front-2800x4726.jpg"
            
            
            srcset="/img/kairos/front-576x972.webp 576w, /img/kairos/front-768x1296.webp 768w, /img/kairos/front-992x1675.webp 992w, /img/kairos/front-1200x2026.webp 1200w, /img/kairos/front-1400x2363.webp 1400w, /img/kairos/front-2800x4726.webp 2800w" sizes="100vw"
            height="4726"
            width="2800"
            >
</div><br>
<p>And why separate the background from the image when they could be a single texture and save a texture fetch? you might be asking yourself.</p>
<p>And you would be right, since a texture fetch (the &lsquo;<strong>SAMPLE_TEXTURE2D</strong>&rsquo; macro) is one of the most expensive operations in shaders.</p>
<p>The answer is that we can add effects <strong>behind</strong> the image representing the card and <strong>in front</strong> of it.</p>
<p>The first effect we are going to see is the transformation of the UV coordinates. In particular, the displacement of these, with which we will achieve the rain effect and the fog effect that you saw at the beginning of this post.</p>
<p>These effects depend on the type of UV mapping your geometry uses. In my case, as we saw in the <a href="/projects/kairos/#rendering_a_card">previous post</a>, I use a cubic projection so if I modify one axis of the coordinates I know that the texture will be displaced on one axis.</p>
<p>You can do a simple test by creating a cube in a scene and assigning a material to it. You can modify the UV coordinates of the material by changing its &lsquo;<strong>Offset</strong>&rsquo;.</p>
<p><img alt="Offset UV" src="/img/kairos/uv.gif" title="Offset UV"></p>
<p>I&rsquo;m going to add two more textures to the shader. One between &lsquo;<strong>background</strong>&rsquo; and &lsquo;<strong>image</strong>&rsquo; and another between &lsquo;<strong>image</strong>&rsquo; and &lsquo;<strong>frame</strong>&rsquo;. In total we would have these layers:</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/layers-2800x1670.jpg"
            
            
            srcset="/img/kairos/layers-576x343.webp 576w, /img/kairos/layers-768x458.webp 768w, /img/kairos/layers-992x591.webp 992w, /img/kairos/layers-1200x716.webp 1200w, /img/kairos/layers-1400x835.webp 1400w, /img/kairos/layers-2800x1670.webp 2800w" sizes="100vw"
            height="1670"
            width="2800"
            >
</div><br>
<p>It will be in these two new textures where I will apply a displacement in their UV coordinates. We only have to modify the UV coordinates in the macro <strong>SAMPLE_TEXTURE2D</strong>. If &lsquo;<strong>_Offset</strong>&rsquo; were a vector with the offset, it would be applied like this:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">float2</span> <span class="n">newUV</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="n">uv</span> <span class="p">+</span> <span class="n">_Offset</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="n">half4</span> <span class="n">image</span> <span class="p">=</span> <span class="n">SAMPLE_TEXTURE2D</span><span class="p">(</span><span class="n">_BackgroundFXTex</span><span class="p">,</span> <span class="n">sampler_BackgroundFXTex</span><span class="p">,</span> <span class="n">newUV</span><span class="p">);</span></span></span></code></pre></div></div><p>But instead of specifying a displacement, I will use a linear velocity vector. I will calculate the final displacement by multiplying this velocity by the time. The time is provided by Unity in the vector &lsquo;<a href="https://docs.unity3d.com/Manual/SL-UnityShaderVariables.html"><strong>_Time</strong></a>&rsquo;, its coordinate <strong>y</strong> being the unscaled time. If &lsquo;<strong>_ScrollVelocity</strong>&rsquo; were a vector with the linear velocity, it would be applied like this:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">float2</span> <span class="n">newUV</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="n">uv</span> <span class="p">+</span> <span class="n">frac</span><span class="p">(</span><span class="n">_ScrollVelocity</span> <span class="p">*</span> <span class="n">_Time</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="n">half4</span> <span class="n">image</span> <span class="p">=</span> <span class="n">SAMPLE_TEXTURE2D</span><span class="p">(</span><span class="n">_BackgroundFXTex</span><span class="p">,</span> <span class="n">sampler_BackgroundFXTex</span><span class="p">,</span> <span class="n">newUV</span><span class="p">);</span></span></span></code></pre></div></div><p>As the UV coordinates are between 0 and 1, with the function &lsquo;<a href="https://learn.microsoft.com/windows/win32/direct3dhlsl/dx-graphics-hlsl-frac"><strong>frac</strong></a>&rsquo; we will use only the decimal part to add it to these coordinates.</p>
<p>By using two effect layers, one behind the image and one in front of it, we can give each layer a different speed to simulate depth by making the farthest layer slower.</p>
<p>To create a rain effect I will use a rain texture that is &lsquo;<strong>seamless</strong>&rsquo;, that is, that you don&rsquo;t notice a cut when you move it. It is important that you use a texture format that allows the transparency channel to have more than one bit of color (not like the PNG format). In my case I used a TGA.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/rain-2800x2800.jpg"
            
            
            srcset="/img/kairos/rain-576x576.webp 576w, /img/kairos/rain-768x768.webp 768w, /img/kairos/rain-992x992.webp 992w, /img/kairos/rain-1200x1200.webp 1200w, /img/kairos/rain-1400x1400.webp 1400w, /img/kairos/rain-2800x2800.webp 2800w" sizes="100vw"
            height="2800"
            width="2800"
            >
</div><br>
<p>The final effect would look something like this:</p>
<center>
  <img src="./rendering_a_card/valeria.gif" width="70%" height="70%"/>
</center>
<br>
<p>By changing the texture to a fog texture, and scrolling on the horizontal axis we can get a fog effect like this:</p>
<center>
  <img src="./rendering_a_card/herrick.gif" width="70%" height="70%"/>
</center>
<br>
<p>Finally it remains to add something fundamental, text. For this we will use <a href="https://docs.unity3d.com/Manual/com.unity.textmeshpro.html">TextMeshPro</a>, since it provides much better quality and options than the text offered by Unity. To install it just add it using the &lsquo;Package Manager&rsquo;.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/package-2800x1768.jpg"
            
            
            srcset="/img/kairos/package-576x364.webp 576w, /img/kairos/package-768x485.webp 768w, /img/kairos/package-992x626.webp 992w, /img/kairos/package-1200x758.webp 1200w, /img/kairos/package-1400x884.webp 1400w, /img/kairos/package-2800x1768.webp 2800w" sizes="100vw"
            height="1768"
            width="2800"
            >
</div><br>
<p>I added a child and added a 3D text.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/tmp-2800x2863.jpg"
            
            
            srcset="/img/kairos/tmp-576x589.webp 576w, /img/kairos/tmp-768x785.webp 768w, /img/kairos/tmp-992x1014.webp 992w, /img/kairos/tmp-1200x1227.webp 1200w, /img/kairos/tmp-1400x1432.webp 1400w, /img/kairos/tmp-2800x2863.webp 2800w" sizes="100vw"
            height="2863"
            width="2800"
            >
</div><br>
<p>And adjust the Z coordinate to be slightly ahead of the card.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/img/kairos/text-2800x970.jpg"
            
            
            srcset="/img/kairos/text-576x199.webp 576w, /img/kairos/text-768x266.webp 768w, /img/kairos/text-992x343.webp 992w, /img/kairos/text-1200x416.webp 1200w, /img/kairos/text-1400x485.webp 1400w, /img/kairos/text-2800x970.webp 2800w" sizes="100vw"
            height="970"
            width="2800"
            >
</div><br>
<p>And <em>voalá</em>!</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-10 mx-auto"><img class="img-fluid "
            src="/img/kairos/label-2800x1677.jpg"
            
            
            srcset="/img/kairos/label-576x345.webp 576w, /img/kairos/label-768x460.webp 768w, /img/kairos/label-992x594.webp 992w, /img/kairos/label-1200x719.webp 1200w, /img/kairos/label-1400x838.webp 1400w, /img/kairos/label-2800x1677.webp 2800w" sizes="100vw"
            height="1677"
            width="2800"
            >
</div><br>
<p>That&rsquo;s all for now. In next posts I will add other effects that can be useful for a card game. In the meantime you can add some small improvements like:</p>
<ul>
<li>One color for each layer to tint it. You would only have to multiply the result of <strong>SAMPLE_TEXTURE2D</strong> by that color.</li>
<li>Scaling. Simply multiplying by a scalar the UV coordinate.</li>
<li>Angular velocity, to rotate the layers of the effects.</li>
<li>Use different <a href="https://photoshoptrainingchannel.com/blending-modes-explained/">blending functions</a> for the effect layers. In this post I have only used a simple way to blend the layers, but there are many blending functions that can give interesting results.</li>
<li>And&hellip; can you think of anything else? I&rsquo;d love to read about it in the comments.</li>
</ul>
<p class="h4">Until next time&hellip; 







    <span class="badge text-bg-secondary">stay gamedev, stay awesome!</span>
    <br><br>
</p>
<p class="h4">




















    

    <!-- <i class="fas fa-code "></i> --><svg class="svg-inline--fa fas fa-code " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg>

    &nbsp;
<a href="https://gist.github.com/FronkonGames/78f2d00334b7aa8d3a3564b6c62f4fe7">Back Side Shader</a><br />





















    

    <!-- <i class="fas fa-code "></i> --><svg class="svg-inline--fa fas fa-code " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg>

    &nbsp;
<a href="https://gist.github.com/FronkonGames/c1e4c12b41612f72b84c6ed68076fb49">Front Side Shader</a><br />





















    

    <!-- <i class="fas fa-code "></i> --><svg class="svg-inline--fa fas fa-code " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg>

    &nbsp;
<a href="https://gist.github.com/FronkonGames/6b419e60eb42d81666bf35f18c59ab00">Border Shader</a></p>

<br>










    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            In these shaders I have prioritized readability over optimization
        </div>
    </div>
<p class="h4">Until next time&hellip; 







    <span class="badge text-bg-secondary">stay gamedev, stay awesome!</span>
    <br><br>
</p>
<hr />

<h2 id="drag_and_drop_cards" class="heading">Drag &amp; Drop Cards 🃏 <a href="#drag_and_drop_cards" aria-labelledby="drag_and_drop_cards">









    

    <!-- <i class="fas fa-link anchor"></i> --><svg class="svg-inline--fa fas fa-link anchor" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg>

    &nbsp;
</a></h2>
<center>
<video src="drag_and_drop_cards/promo.mp4" type="video/mp4" loop="false" preload="auto" autoplay  class="video-shortcode">
  There should have been a video here but your browser does not seem to support it.
</video>

</center>
<br>










    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            All art in this post have been generated by an AI and do not represent the final style of the game
        </div>
    </div>
<p>Now that I have defined <a href="../rendering-a-card/">visually a card</a>, the next thing to do is to move it around the scene.</p>
<p>To do this we first have to detect the cards. We will do this using the &lsquo;<strong>Raycast</strong>&rsquo; functions, which <strong>fire</strong> rays that when colliding with an object give us information about it.</p>
<p>Since it is a performance consuming operation, we will use some tricks to optimize it. The first one is that we will create a <a href="https://docs.unity3d.com/Manual/use-layers.html">layer</a> to discard objects that are not involved in the operation. We will named it &lsquo;<strong>DragAndDrop</strong>&rsquo;.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-6 mx-auto"><img class="img-fluid "
            src="/projects/kairos/drag_and_drop_cards/layers-2800x2408.jpg"
            
            
            srcset="/projects/kairos/drag_and_drop_cards/layers-576x495.webp 576w, /projects/kairos/drag_and_drop_cards/layers-768x660.webp 768w, /projects/kairos/drag_and_drop_cards/layers-992x853.webp 992w, /projects/kairos/drag_and_drop_cards/layers-1200x1032.webp 1200w, /projects/kairos/drag_and_drop_cards/layers-1400x1204.webp 1400w, /projects/kairos/drag_and_drop_cards/layers-2800x2408.webp 2800w" sizes="100vw"
            height="2408"
            width="2800"
            >
</div><br>
<p>We will also limit the ray length to the maximum distance our camera sees, since as a general rule we are not interested in objects we are not going to see. This distance is &lsquo;<strong>Camera.main.farClipPlane</strong>&rsquo;.</p>
<p>Since the &lsquo;<strong>Raycast</strong>&rsquo; operation is going to be used inside the &lsquo;<strong>Update</strong>&rsquo; loop (it is going to be executed every frame), it is always a good idea to avoid allocating memory if we can avoid it. So we will create a <a href="https://docs.unity3d.com/ScriptReference/Ray.html">Ray</a> and use the function <a href="https://docs.unity3d.com/ScriptReference/Physics.RaycastNonAlloc.html">Physics.RaycastNonAlloc</a>.</p>
<p>The code to detect the cards would look something like this:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="c1">// Layer of the objects to be detected.</span>
</span></span><span class="line"><span class="cl"><span class="na">  [SerializeField]</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">LayerMask</span> <span class="n">raycastMask</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// How many impacts of the beam we want to obtain.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="kd">const</span> <span class="kt">int</span> <span class="n">HitsCount</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Information on the impacts of shooting a ray.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="k">readonly</span> <span class="n">RaycastHit</span><span class="p">[]</span> <span class="n">raycastHits</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RaycastHit</span><span class="p">[</span><span class="n">HitsCount</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1">// Ray created from the camera to the projection of the mouse</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// coordinates on the scene.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Ray</span> <span class="n">mouseRay</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// Returns the Transfrom of the object closest to the origin</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// of the ray.</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;returns&gt;Transform or null if there is no impact.&lt;/returns&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Transform</span> <span class="n">MouseRaycast</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Transform</span> <span class="n">hit</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Fire the ray!</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">Physics</span><span class="p">.</span><span class="n">RaycastNonAlloc</span><span class="p">(</span><span class="n">mouseRay</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">raycastHits</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">farClipPlane</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">raycastMask</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// We order the impacts according to distance.</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="p">.</span><span class="n">Array</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">distance</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">distance</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// We are only interested in the first one.</span>
</span></span><span class="line"><span class="cl">      <span class="n">hit</span> <span class="p">=</span> <span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">transform</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">hit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>  </span></span></code></pre></div></div><p>Before calling this function, we must update &lsquo;<strong>mouseRay</strong>&rsquo; with the mouse coordinates. We will do it with this code:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="n">mouseRay</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenPointToRay</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span></span></span></code></pre></div></div>









    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            In this post I will use the old <a href="https://docs.unity3d.com/ScriptReference/Input.html">Input</a> for simplicity, but it is recommended to use the new <a href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.4/manual/QuickStartGuide.html">Input System</a>.
        </div>
    </div>
<p>In order to get all this to work on a card, we must first add a &lsquo;<a href="https://docs.unity3d.com/ScriptReference/Collider.html">Collider</a>&rsquo;. Without this component, our ray would pass through the card without detecting it. A &lsquo;<a href="https://docs.unity3d.com/Manual/class-BoxCollider.html">Box Collider</a>&rsquo; is a good choice for the type of geometry of a card, but if you need more precision you can use a &lsquo;<a href="https://docs.unity3d.com/Manual/class-MeshCollider.html">Mesh Collider</a>&rsquo;.</p>
<p>The second thing to do is to assign the &lsquo;<strong>layer</strong>&rsquo; we have selected to the chart. We are now ready to detect a card.</p>
<center>
  <img src="drag_and_drop_cards/rayhit.gif" width="100%" height="100%"/>
</center>
<br>
<p>Now we can start moving our cards. First we are going to define two interfaces, the first one is <strong>IDrag</strong>, for objects that you can drag.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Draggable object.</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">interface</span> <span class="nc">IDrag</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Can it be draggable? &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">IsDraggable</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; A Drag operation is currently underway. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">Dragging</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Mouse enters the object. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnPointerEnter</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Mouse exits object. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnPointerExit</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Drag begins. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnBeginDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt;A drag is being made. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;deltaPosition&#34;&gt; Mouse offset position. &lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;droppable&#34;&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// Object on which a drop may be made, or null. &lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">deltaPosition</span><span class="p">,</span> <span class="n">IDrop</span> <span class="n">droppable</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; The drag operation is completed. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;droppable&#34;&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// Object on which a drop may be made, or null. &lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnEndDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">,</span> <span class="n">IDrop</span> <span class="n">droppable</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>And the second is <strong>IDrop</strong>, for objects that can accept IDrag objects.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Accept draggable objects.</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">interface</span> <span class="nc">IDrop</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Is it droppable? &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">IsDroppable</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Accept an IDrag? &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;drag&#34;&gt;Object IDrag.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;returns&gt;Accept or not the object.&lt;/returns&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">AcceptDrop</span><span class="p">(</span><span class="n">IDrag</span> <span class="n">drag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Performs the drop operation of an IDrag object. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;drag&#34;&gt;Object IDrag.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnDrop</span><span class="p">(</span><span class="n">IDrag</span> <span class="n">drag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>As you can see, it is <strong>IDrop</strong> that will authorize an <strong>IDrag</strong>, with its <strong>AcceptDrop</strong> method, whether or not to accept a drop operation to be executed on it.</p>
<p>With these two interfaces ready we can start with the one in charge of handling the drag and drop operations of our cards. We can call it &lsquo;<strong>DragAndDropManager</strong>&rsquo; and will be a <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.html">MonoBehaviour</a>. An operation of drag &amp; drop operation can be divided into:</p>
<ol>
<li>There is no drag operation at present.</li>
</ol>
<ul>
<li>Cards must be detected under the mouse pointer.
<ul>
<li>If a card is detected and the left mouse button is pressed, a drag operation is started and the <strong>OnBeginDrag</strong> method must be called.</li>
<li>If there is a detected card and no button is being pressed, the <strong>OnPointerEnter</strong> and <strong>OnPointerExit</strong> methods of the detected card are called.</li>
</ul>
</li>
</ul>
<ol start="2">
<li>A drag operation is in progress.</li>
</ol>
<ul>
<li>If the left mouse button is pressed, the card should be moved and the <strong>OnDrag</strong> method should be called.</li>
<li>If it is not, the drag operation must be finished and the <strong>OnEndDrag</strong> method must be called.</li>
</ul>










    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            All the code in this article is designed to move the cards in the XZ plane and use the Y axis for the height. If you use different axes you will have to modify the code.
        </div>
    </div>
<p>All this will have to be done in each frame, so it will be done inside the function &lsquo;<strong>Update</strong>&rsquo; of &lsquo;<strong>DragAndDropManager</strong>&rsquo;. We will use these variables:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="c1">// Height at which we want the card to be in a drag operation.</span>
</span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Range(0.0f, 10.0f)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">height</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Object to which we are doing a drag operation</span>
</span></span><span class="line"><span class="cl"><span class="c1">// or null if no drag operation currently exists.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">IDrag</span> <span class="n">currentDrag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// IDrag objects that the mouse passes over.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">IDrag</span> <span class="n">possibleDrag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// To know the position of the drag object.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Transform</span> <span class="n">currentDragTransform</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// To calculate the mouse offset (in world-space).</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Vector3</span> <span class="n">oldMouseWorldPosition</span><span class="p">;</span></span></span></code></pre></div></div><p>Let&rsquo;s see how to detect an <strong>IDrag</strong>.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;Detects an IDrag object under the mouse.&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;returns&gt;IDrag or null.&lt;/returns&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">IDrag</span> <span class="n">DetectDraggable</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">IDrag</span> <span class="n">draggable</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">mouseRay</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenPointToRay</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">Transform</span> <span class="n">hit</span> <span class="p">=</span> <span class="n">MouseRaycast</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">hit</span> <span class="p">!=</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">draggable</span> <span class="p">=</span> <span class="n">hit</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">IDrag</span><span class="p">&gt;();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">draggable</span> <span class="k">is</span> <span class="p">{</span> <span class="n">IsDraggable</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="n">currentDragTransform</span> <span class="p">=</span> <span class="n">hit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="n">draggable</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">draggable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>Now there are two possibilities, that the left mouse button is pressed or not pressed. If it is pressed and there is an <strong>IDrag</strong> object under the mouse pointer:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">IDrag</span> <span class="n">draggable</span> <span class="p">=</span> <span class="n">DetectDraggable</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Left mouse button pressed?</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetMouseButtonDown</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">==</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Is there an IDrag object under the mouse pointer?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">draggable</span> <span class="p">!=</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We already have an object to start the drag operation!</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span> <span class="p">=</span> <span class="n">draggable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDragTransform</span> <span class="p">=</span> <span class="n">hit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">oldMouseWorldPosition</span> <span class="p">=</span> <span class="n">MousePositionToWorldPoint</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// Hide the mouse icon.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Cursor</span><span class="p">.</span><span class="n">visible</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// And we lock the movements to the window frame,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// so we can&#39;t move objects out of the camera&#39;s view.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Cursor</span><span class="p">.</span><span class="n">lockState</span> <span class="p">=</span> <span class="n">CursorLockMode</span><span class="p">.</span><span class="n">Confined</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// The drag operation begins.</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">Dragging</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">OnBeginDrag</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">height</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">z</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>And if the left mouse button is not pressed:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="c1">// Left mouse button not pressed?</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetMouseButtonDown</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">==</span> <span class="kc">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// We pass over a new IDrag?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">draggable</span> <span class="p">!=</span> <span class="kc">null</span> <span class="p">&amp;&amp;</span> <span class="n">possibleDrag</span> <span class="p">==</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We execute its OnPointerEnter.</span>
</span></span><span class="line"><span class="cl">    <span class="n">possibleDrag</span> <span class="p">=</span> <span class="n">draggable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">possibleDrag</span><span class="p">.</span><span class="n">OnPointerEnter</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We are leaving an IDrag?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">draggable</span> <span class="p">==</span> <span class="kc">null</span> <span class="p">&amp;&amp;</span> <span class="n">possibleDrag</span> <span class="p">!=</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We execute its OnPointerExit.</span>
</span></span><span class="line"><span class="cl">    <span class="n">possibleDrag</span><span class="p">.</span><span class="n">OnPointerExit</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">possibleDrag</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>We already have the first part, now let&rsquo;s go for the second part: to handle a drag operation. The first thing we will do is a new method that will return the <strong>IDrop</strong> that is under a card. It&rsquo;s not as simple as &lsquo;<strong>DetectDraggable()</strong>&rsquo;, since a card has a surface and can be on several objects at once. We will need to cast four rays, one for each corner. And to choose one, we will order the<br />
hits by proximity to the center of the card, this way we will get the <strong>IDrop</strong> object that is on the card and is the closest to it.</p>
<p>We will store the rays hits in an array:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="c1">// Information on impacts from the corners of a card.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="k">readonly</span> <span class="n">RaycastHit</span><span class="p">[]</span> <span class="n">cardHits</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RaycastHit</span><span class="p">[</span><span class="m">4</span><span class="p">];</span></span></span></code></pre></div></div><p>And this is the method to search for the nearest IDrop:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;Detects an IDrop object under the mouse.&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;returns&gt;IDrop or null.&lt;/returns&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">IDrop</span> <span class="n">DetectDroppable</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">IDrop</span> <span class="n">droppable</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// The four corners of the card.</span>
</span></span><span class="line"><span class="cl">  <span class="n">Vector3</span> <span class="n">position</span> <span class="p">=</span> <span class="n">currentDragTransform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">Vector2</span> <span class="n">halfSize</span> <span class="p">=</span> <span class="n">cardSize</span> <span class="p">*</span> <span class="m">0.5f</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">Vector3</span><span class="p">[]</span> <span class="n">cardConner</span> <span class="p">=</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">z</span> <span class="p">-</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">z</span> <span class="p">+</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">z</span> <span class="p">-</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">z</span> <span class="p">+</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">cardHitIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">cardHits</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We launch the four rays.</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">cardConner</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ray</span> <span class="n">ray</span> <span class="p">=</span> <span class="k">new</span><span class="p">(</span><span class="n">cardConner</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">down</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">Physics</span><span class="p">.</span><span class="n">RaycastNonAlloc</span><span class="p">(</span><span class="n">ray</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">raycastHits</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">farClipPlane</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">raycastMask</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// We order the impacts by distance from the origin of the ray.</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="p">.</span><span class="n">Array</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="n">x</span><span class="p">.</span><span class="n">distance</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">distance</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// We are only interested in the closest one.</span>
</span></span><span class="line"><span class="cl">      <span class="n">cardHits</span><span class="p">[</span><span class="n">cardHitIndex</span><span class="p">++]</span> <span class="p">=</span> <span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">cardHitIndex</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We are looking for the nearest possible IDrop.</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="p">.</span><span class="n">Array</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">cardHits</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="n">x</span><span class="p">.</span><span class="n">distance</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">distance</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">droppable</span> <span class="p">=</span> <span class="n">cardHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">IDrop</span><span class="p">&gt;();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">droppable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>Let&rsquo;s see it in action:</p>
<center>
  <img src="drag_and_drop_cards/cardhits.gif" width="100%" height="100%"/>
</center>
<br>
<p>We can now proceed to the part where we handle a drag operation:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">currentDrag</span> <span class="p">!=</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">IDrop</span> <span class="n">droppable</span> <span class="p">=</span> <span class="n">DetectDroppable</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Is the left mouse button held down?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetMouseButton</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">==</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Calculate the offset of the mouse with respect</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// to its previous position.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Vector3</span> <span class="n">mouseWorldPosition</span> <span class="p">=</span> <span class="n">MousePositionToWorldPoint</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">Vector3</span> <span class="n">offset</span> <span class="p">=</span> <span class="n">mouseWorldPosition</span> <span class="p">-</span> <span class="n">oldMouseWorldPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">offset</span> <span class="p">*=</span> <span class="n">dragSpeed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// OnDrag is executed.</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">OnDrag</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">droppable</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">oldMouseWorldPosition</span> <span class="p">=</span> <span class="n">mouseWorldPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetMouseButtonUp</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">==</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// The left mouse button is released and</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// the drag operation is finished.</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">Dragging</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">OnEndDrag</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">,</span> <span class="n">droppable</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDragTransform</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// We return the mouse icon to its normal state.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Cursor</span><span class="p">.</span><span class="n">visible</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Cursor</span><span class="p">.</span><span class="n">lockState</span> <span class="p">=</span> <span class="n">CursorLockMode</span><span class="p">.</span><span class="n">None</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>We already have the complete manager, but if you look at the code it doesn&rsquo;t actually move anything. That&rsquo;s because it&rsquo;s the <strong>IDrag</strong> objects that are responsible for doing it. Let&rsquo;s see how they would be an object <strong>IDrag</strong>, which in our case is a card.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt; Card Drag. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="na">[RequireComponent(typeof(Collider))]</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">sealed</span> <span class="k">class</span> <span class="nc">CardDrag</span> <span class="p">:</span> <span class="n">MonoBehaviour</span><span class="p">,</span> <span class="n">IDrag</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">IsDraggable</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="kd">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">Dragging</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Position when the Drag starts.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Vector3</span> <span class="n">dragOriginPosition</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Unused for the moment.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnPointerEnter</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnPointerExit</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">)</span>  <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Drag begins. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnBeginDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We store the current position, so that in case</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// the drag operation is not completed, the card</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// will return to its original position.</span>
</span></span><span class="line"><span class="cl">    <span class="n">dragOriginPosition</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// We raise the card to the height indicated by &#39;position&#39;.</span>
</span></span><span class="line"><span class="cl">    <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt;A drag is being made. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;deltaPosition&#34;&gt; Mouse offset position. &lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;droppable&#34;&gt;Object on which a drop may be made, or null.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">deltaPosition</span><span class="p">,</span> <span class="n">IDrop</span> <span class="n">droppable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We ignore the displacement of the height.</span>
</span></span><span class="line"><span class="cl">    <span class="n">deltaPosition</span><span class="p">.</span><span class="n">y</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// We move the card.</span>
</span></span><span class="line"><span class="cl">    <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="n">deltaPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; The drag operation is completed. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;droppable&#34;&gt;Object on which a drop may be made, or null.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnEndDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">,</span> <span class="n">IDrop</span> <span class="n">droppable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// The IDrop object is active and accepts IDrag.</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">droppable</span> <span class="k">is</span> <span class="p">{</span> <span class="n">IsDroppable</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">        <span class="n">droppable</span><span class="p">.</span><span class="n">AcceptDrop</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">==</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                       <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                       <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// There was no drop, we return to the original position.</span>
</span></span><span class="line"><span class="cl">      <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">dragOriginPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div>









    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            Remember that I am moving cards that do not have physics. In the case of objects with physics (with the <a href="https://docs.unity3d.com/es/2019.4/Manual/class-Rigidbody.html">RigidBody</a> component), the correct way to move them is using &lsquo;<a href="https://docs.unity3d.com/ScriptReference/Rigidbody.MovePosition.html">RigidBody.MovePosition</a>&rsquo; if it is <a href="https://docs.unity3d.com/ScriptReference/Rigidbody-isKinematic.html">Kinematic</a>, or using &lsquo;<a href="https://docs.unity3d.com/ScriptReference/Rigidbody.AddForce.html">RigidBody.AddForce</a>&rsquo; if it is not.
        </div>
    </div>
<p>We also need an <strong>IDrop</strong> object that will accept our traveling card. It is as simple as this:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Accept draggable objects.</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">DroppableFloor</span> <span class="p">:</span> <span class="n">MonoBehaviour</span><span class="p">,</span> <span class="n">IDrop</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">IsDroppable</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We accept all IDrags.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">AcceptDrop</span><span class="p">(</span><span class="n">IDrag</span> <span class="n">drag</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnDrop</span><span class="p">(</span><span class="n">IDrag</span> <span class="n">drag</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>Let&rsquo;s take a look at a successful drag operation.</p>
<center>
  <img src="drag_and_drop_cards/dragok.gif" width="100%" height="100%"/>
</center>
<br>
<p>And now one that does not, since one of the corners collides with an <strong>IDrag</strong> (another card) and this one is closer to the <strong>IDrop</strong> (the ground).</p>
<center>
  <img src="drag_and_drop_cards/dragfail.gif" width="100%" height="100%"/>
</center>
<br>
<p>We already have the basics. Now let&rsquo;s improve it a bit. The first thing we can do is change the way we pick up and drop the cards. Now they do it instantly,<br />
they <strong>teleport</strong> to the position we tell them to. Instead we can use the velocity formula (velocity = space / time) to move with constant velocity the cards.<br />
We would have something like this:</p>
<center>
  <img src="drag_and_drop_cards/draglinear.gif" width="100%" height="100%"/>
</center>
<br>
<p>Better, but still doesn&rsquo;t give a good feeling. Objects in real life do not reach a speed at instance, they have <a href="https://en.wikipedia.org/wiki/Inertia">inertia</a>. To make it similar in a simple way we can use <a href="https://easings.net/">Easing functions</a>, functions that interpolate values (values, vectors, colors, etc) using different curves.</p>
<center>
  <img src="drag_and_drop_cards/easings.gif" width="90%" height="90%"/>
</center>
<br>
<p>There are many libraries with these functions. You may be interested in using my &lsquo;<a href="https://gist.github.com/FronkonGames/ae3d0d613ac4ea6738e288c0a490c020">Tiny Tween</a>&rsquo;, a simple to use library, very complete and in <strong>one file</strong>.</p>
<p>Let&rsquo;s change the way we pick up cards, using &lsquo;<a href="https://gist.github.com/FronkonGames/ae3d0d613ac4ea6738e288c0a490c020">Tiny Tween</a>&rsquo; to raise it to the height we want in a natural way.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">void</span> <span class="n">OnBeginDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">dragOriginPosition</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// While the card is being lifted, we do not want it to be draggable.</span>
</span></span><span class="line"><span class="cl">  <span class="n">IsDraggable</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We create a Tween to change the height of the card.</span>
</span></span><span class="line"><span class="cl">  <span class="n">TweenFloat</span><span class="p">.</span><span class="n">Create</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Origin</span><span class="p">(</span><span class="n">dragOriginPosition</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>   <span class="c1">// Origin.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Destination</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>        <span class="c1">// Destination.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">riseDuration</span><span class="p">)</span>         <span class="c1">// Duration.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">EasingIn</span><span class="p">(</span><span class="n">riseEaseIn</span><span class="p">)</span>           <span class="c1">// Initial Easing function.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">EasingOut</span><span class="p">(</span><span class="n">riseEaseOut</span><span class="p">)</span>         <span class="c1">// Final Easing function.</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// This is where the position is modified.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">OnUpdate</span><span class="p">(</span><span class="n">tween</span> <span class="p">=&gt;</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">tween</span><span class="p">.</span><span class="n">Value</span><span class="p">,</span>      <span class="c1">// Only the height.</span>
</span></span><span class="line"><span class="cl">                  <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">OnEnd</span><span class="p">(</span><span class="n">_</span> <span class="p">=&gt;</span> <span class="n">IsDraggable</span> <span class="p">=</span> <span class="kc">true</span><span class="p">)</span> <span class="c1">// When finished,</span>
</span></span><span class="line"><span class="cl">                                    <span class="c1">// it becomes draggable again.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>And this would be the result:</p>
<center>
  <img src="drag_and_drop_cards/dragdrop.gif" width="100%" height="100%"/>
</center>
<br>
<p>Much better! And only adding one file! ;)</p>
<p>Let&rsquo;s apply the same change to how the card moves. Right now it&rsquo;s very static, it looks like it&rsquo;s moving in a vacuum. We can exaggerate the friction of a flexible object moving in the air and rotate the cards depending on their direction and speed. You may have seen this effect in games such as &lsquo;<a href="https://hearthstone.blizzard.com/">Hearthstone</a>&rsquo;.</p>
<p>We are going to modify the angles of the card according to its velocity vector. Specifically we will change the <strong>pitch</strong> and <strong>roll</strong>.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/projects/kairos/drag_and_drop_cards/axis-2800x2106.jpg"
            
            
            srcset="/projects/kairos/drag_and_drop_cards/axis-576x433.webp 576w, /projects/kairos/drag_and_drop_cards/axis-768x578.webp 768w, /projects/kairos/drag_and_drop_cards/axis-992x746.webp 992w, /projects/kairos/drag_and_drop_cards/axis-1200x902.webp 1200w, /projects/kairos/drag_and_drop_cards/axis-1400x1053.webp 1400w, /projects/kairos/drag_and_drop_cards/axis-2800x2106.webp 2800w" sizes="100vw"
            height="2106"
            width="2800"
            >
</div><br>
<p>Each axis will have a <strong>force</strong> that will be applied to modify that axis. We will also limit the <strong>range</strong> of the angles. And finally a time that will be the time it takes for the axes to return to their original value.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="na">[Header(&#34;Pitch&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Force&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">pitchForce</span> <span class="p">=</span> <span class="m">10.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Minimum Angle&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">pitchMinAngle</span> <span class="p">=</span> <span class="p">-</span><span class="m">25.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Maximum Angle&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">pitchMaxAngle</span> <span class="p">=</span> <span class="m">25.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[Space]</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[Header(&#34;Roll&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Force&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">rollForce</span> <span class="p">=</span> <span class="m">10.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Minimum Angle&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">rollMinAngle</span> <span class="p">=</span> <span class="p">-</span><span class="m">25.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Maximum Angle&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">rollMaxAngle</span> <span class="p">=</span> <span class="m">25.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[Space]</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">restTime</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Pitch angle and velocity.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">pitchAngle</span><span class="p">,</span> <span class="n">pitchVelocity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Roll angle and velocity.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">rollAngle</span><span class="p">,</span> <span class="n">rollVelocity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// To calculate the velocity vector.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Vector3</span> <span class="n">oldPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// The original rotation</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Vector3</span> <span class="n">originalAngles</span><span class="p">;</span></span></span></code></pre></div></div><p>In each frame we must calculate:</p>
<ul>
<li>The velocity vector, or offset, of the card.</li>
<li>Calculate the pitch and roll depending on each axis and its force (<strong>pitchForce</strong> and <strong>rollForce</strong>).</li>
<li>Limit the angles to the valid ranges.</li>
<li>Calculate the angles and over time (<strong>restTime</strong>) tend to zero.</li>
<li>Apply the angles to the rotation of the card.</li>
</ul>
<p>The offset vector is very simple, just subtract the current position from the position of the previous frame.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">Vector3</span> <span class="n">currentPosition</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Vector3</span> <span class="n">offset</span> <span class="p">=</span> <span class="n">currentPosition</span> <span class="p">-</span> <span class="n">oldPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">oldPosition</span> <span class="p">=</span> <span class="n">currentPosition</span><span class="p">;</span></span></span></code></pre></div></div><p>To rule out small vibrations, we will only calculate the angles when the modulus of <strong>offset</strong> is greater than <a href="https://docs.unity3d.com/ScriptReference/Mathf.Epsilon.html">Mathf.Epsilon</a> (which is a value very close to zero). And since we don&rsquo;t care about the actual value of the modulus, we will use <a href="https://docs.unity3d.com/ScriptReference/Vector3-sqrMagnitude.html">Vector3.sqrMagnitude</a> to avoid calculating a square root.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">offset</span><span class="p">.</span><span class="n">sqrMagnitude</span> <span class="p">&gt;</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">Epsilon</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">pitchAngle</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">Clamp</span><span class="p">(</span><span class="n">pitchAngle</span> <span class="p">+</span> <span class="n">offset</span><span class="p">.</span><span class="n">z</span> <span class="p">*</span> <span class="n">pitchForce</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">pitchMinAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">pitchMaxAngle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">rollAngle</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">Clamp</span><span class="p">(</span><span class="n">rollAngle</span> <span class="p">+</span> <span class="n">offset</span><span class="p">.</span><span class="n">x</span> <span class="p">*</span> <span class="n">rollForce</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="n">rollMinAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="n">rollMaxAngle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>We already have the value of each angle, now we want that little by little those values tend to be at rest (<strong>restTime</strong>). To do it we will use the function <a href="https://docs.unity3d.com/ScriptReference/Mathf.SmoothDamp.html">Mathf.SmoothDamp</a> that also smooths the changes.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">pitchAngle</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">SmoothDamp</span><span class="p">(</span><span class="n">pitchAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                              <span class="m">0.0f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                              <span class="k">ref</span> <span class="n">pitchVelocity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                              <span class="n">restTime</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">10.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">rollAngle</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">SmoothDamp</span><span class="p">(</span><span class="n">rollAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                             <span class="m">0.0f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                             <span class="k">ref</span> <span class="n">rollVelocity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                             <span class="n">restTime</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">10.0f</span><span class="p">);</span></span></span></code></pre></div></div><p>And now we only have to apply the angles to the rotation of the card.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">transform</span><span class="p">.</span><span class="n">rotation</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="n">Euler</span><span class="p">(</span><span class="n">originalAngles</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">pitchAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                      <span class="n">originalAngles</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                      <span class="n">originalAngles</span><span class="p">.</span><span class="n">z</span> <span class="p">-</span> <span class="n">rollAngle</span><span class="p">);</span></span></span></code></pre></div></div><p>Let&rsquo;s see the result.</p>
<center>
  <img src="drag_and_drop_cards/tilt.gif" width="100%" height="100%"/>
</center>
<br>
<p>Nice! That&rsquo;s all for now. In next posts we will see some useful objects for a card game such as: decks, slot, etc. In the meantime you can add some improvements like:</p>
<ul>
<li>Choose which Easing functions to use to pick up cards and drop them. I am using Quart/Back to pick them up and Quart/Bounce to drop them.</li>
<li>Add some dust particles when dropping a card.</li>
<li>Add a camera shake when dropping a card to give it more drama.</li>
<li>And&hellip; can you think of anything else? I&rsquo;d love to read about it in the comments.</li>
</ul>
<p class="h4">Until next time&hellip; 







    <span class="badge text-bg-secondary">stay gamedev, stay awesome!</span>
    <br><br>
</p>
<p class="h4">




















    

    <!-- <i class="fas fa-code "></i> --><svg class="svg-inline--fa fas fa-code " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg>

    &nbsp;
<a href="https://gist.github.com/FronkonGames/e14d6f02fe90df7a2e212b11ee2f0a3c">Drag and Drop source code</a></p>



<div class="row row-cols-2 mt-5 mb-3">
    <div class="col">
        </div>
    <div class="col text-end">
        <a class="previous" href="/projects/gamework-foundation/">
                    Game:Work Foundation&nbsp;









    

    <!-- <i class="fas fa-arrow-right "></i> --><svg class="svg-inline--fa fas fa-arrow-right " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 448 512"><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg>

    

                </a></div>
</div>



                        
                        <div class="giscus">

  
  <script
    src="https://giscus.app/client.js"
    data-repo="FronkonGames/fronkongames.github.io"
    data-repo-id="R_kgDOIyuXfQ"
    data-category="Comments"
    data-category-id="DIC_kwDOIyuXfc4Cf3OB"
    data-mapping="og:title"
    data-reactions-enabled="1"
    data-input-position="top"
    data-theme="dark"
    data-lang="en"
    data-loading="lazy"
    data-strict="1"
    crossorigin="anonymous"
    onload="document.body.dispatchEvent(new Event('giscus-load'))"
    async
  ></script></div>
                        

                </div>
                <div class="col col-md-3 col-lg-2 d-none d-md-block pt-5">
                    
    


<div class="toc toc-sidebar mb-5 my-md-0 mb-lg-5 p-3 text-body-secondary sticky-top">
    

    
        
        







<strong class="d-block h6 my-2 pb-2">On this page:</strong>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#hello_everybody">Hello Everybody! 🧟</a></li>
    <li><a href="#making_a_3d_card_in_blender">Making A 3D Card In Blender 🃏</a></li>
    <li><a href="#rendering_a_card">Rendering A Card 🖌️</a></li>
    <li><a href="#drag_and_drop_cards">Drag &amp; Drop Cards 🃏</a></li>
  </ul>
</nav>

    </div>

                </div>
            </div>
        </div>

            
            
            <script src="/js/custom-effects.js"></script>
        </div>
    </body>
</html>
