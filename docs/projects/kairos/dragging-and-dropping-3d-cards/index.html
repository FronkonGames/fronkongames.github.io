

<!doctype html>
<html lang="en" class="no-js">
    <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.122.0">
    <meta name="theme" content="Hinode 0.24.0-beta3">
    





    
    
<link rel="stylesheet" href="/css/main.min.beeaeaf5cec42efc86b3a10d5ccac318f52d6a942f3f6a165e137460683f6d54.css" integrity="sha256-vurq9c7ELvyGs6ENXMrDGPUtapQvP2oWXhN0YGg/bVQ=" crossorigin="anonymous">
    
        
    
        
        <link rel="preload" href="/fonts/inter-v12-latin-regular.woff2" as="font" type="font/woff2" crossorigin>






  <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <title>Fronkon Games - Drag &amp; Drop Cards üÉè</title>
    <meta name="description" content="Moving 3D cards... with juice">

<link rel="canonical" href="https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/">

<meta property="og:locale" content="es_ES">
<meta property="og:type" content="article">
<meta property="og:title" content="Drag &amp; Drop Cards üÉè">
<meta property="og:description" content="Moving 3D cards... with juice">
<meta property="og:url" content="https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/">
<meta property="og:site_name" content="Fronkon Games">
<meta property="article:published_time" content="1970-01-01T01:00:04+01:00">
    <meta property="article:modified_time" content="2024-06-05T13:03:34+02:00">
    <meta property="og:image" content="https://fronkongames.github.io/img/kairos_drag_drop.gif">
<meta property="og:image:alt" content="Drag &amp; Drop Cards üÉè">



<meta name="twitter:card" content="summary_large_image">


<meta name="twitter:title" content="Drag &amp; Drop Cards üÉè">
<meta name="twitter:description" content="Moving 3D cards... with juice">
<meta name="twitter:image" content="https://fronkongames.github.io/img/kairos_drag_drop.gif">
<meta name="twitter:image:alt" content="Drag &amp; Drop Cards üÉè">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
        "@id": "https://fronkongames.github.io/#/schema/organization/1",
      "name": "Fronkon Games",
      "url": "https://fronkongames.github.io/",
      "sameAs": [
        "https://x.com/fronkongames"
        , "https://www.linkedin.com/in/martinbr"
        , "https://github.com/FronkonGames"
        ],
      "image": {
          "@type": "ImageObject",
          "@id": "https://fronkongames.github.io/#/schema/image/1",
          "url": "https://fronkongames.github.io/\u003cnil\u003e",
          "width": null ,
          "height": null ,
          "caption": "Fronkon Games"
        }
      },
    {
      "@type": "WebSite",
      "@id": "https://fronkongames.github.io/#/schema/website/1",
      "url": "https://fronkongames.github.io/",
      "name": "Fronkon Games",
      "description": "Hi! I\u0027m Martin Bustos, an indie game developer and asset store publisher",
      "publisher": {
          "@id": "https://fronkongames.github.io/#/schema/organization/1"
        }
      },
    {
      "@type": "WebPage",
      "@id": "https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/",
      "url": "https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/",
      "name": "Drag \u0026 Drop Cards üÉè",
      "description": "Moving 3D cards... with juice",
      "isPartOf": {
        "@id": "https://fronkongames.github.io/#/schema/website/1"
      },
      "about": {
          "@id": "https://fronkongames.github.io/#/schema/organization/1"
        },
      "datePublished": "1970-01-01T01:00:04CET",
      "dateModified": "2024-06-05T13:03:34CET",
      "breadcrumb": {
        "@id": "https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/#/schema/breadcrumb/1"
      },
      "primaryImageOfPage": {
        "@id": "https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/#/schema/image/2"
      },
      "inLanguage": "es-ES",
      "potentialAction": [{
        "@type": "ReadAction", "target": ["https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/"]
      }]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/#/schema/breadcrumb/1",
      "name": "Breadcrumbs",
      "itemListElement": [{
        "@type": "ListItem",
        "position":  1 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://fronkongames.github.io/",
          "url": "https://fronkongames.github.io/",
          "name": "Home"
          }
        },{
        "@type": "ListItem",
        "position":  2 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://fronkongames.github.io/projects/",
          "url": "https://fronkongames.github.io/projects/",
          "name": "Projects"
          }
        },{
        "@type": "ListItem",
        "position":  3 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://fronkongames.github.io/projects/kairos/",
          "url": "https://fronkongames.github.io/projects/kairos/",
          "name": "Kairos"
          }
        },{
        "@type": "ListItem",
        "position":  4 ,
        "item": {
          "@id": "https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/"
          }
        }]
    },

    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "ImageObject",
          "@id": "https://fronkongames.github.io/projects/kairos/dragging-and-dropping-3d-cards/#/schema/image/2",
          "url": "https://fronkongames.github.io/img/kairos_drag_drop.gif",
          "contentUrl": "https://fronkongames.github.io/img/kairos_drag_drop.gif",
          "caption": "Drag \u0026 Drop Cards üÉè"
        }
      ]
    }

  ]
}
</script>
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon_hu6d8cf4f9ec6d53de5a2189901820c862_195725_16x16_resize_catmullrom_3.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon_hu6d8cf4f9ec6d53de5a2189901820c862_195725_32x32_resize_catmullrom_3.png">
        <link rel="icon" type="image/png" sizes="48x48" href="/img/favicon_hu6d8cf4f9ec6d53de5a2189901820c862_195725_48x48_resize_catmullrom_3.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon_hu6d8cf4f9ec6d53de5a2189901820c862_195725_180x0_resize_catmullrom_3.png">
    

</head>

    <body>
<script src="/js/critical.bundle.min.9e93eae373778facdc6b9824d1766293b1dadcaa460364245ff6be48da3780d5.js" integrity="sha256-npPq43N3j6zca5gk0XZik7Ha3KpGA2QkX/a&#43;SNo3gNU=" crossorigin="anonymous"></script>
    <div class="d-flex flex-column min-vh-100">
            <div class="d-flex flex-column ">










<div class="container-fluid fixed-top p-0">






<nav class="navbar p-4 bg-body navbar-fixed-top navbar-expand-md"
        
        
        >
        <div class="container-xxl p-0">
            <div class="d-flex navbar-container justify-content-center">
                
                <div class="d-flex align-items-center">
                        <button class="navbar-toggler collapsed p-0 mx-auto invisible fw-30" type="button">









    

    <!-- <i class="fas fa-ellipsis fa-fw"></i> --><svg class="svg-inline--fa fas fa-ellipsis fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 448 512"><path d="M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"/></svg>

    
</button></div>
        
                
                <div class="mx-auto">
                    <a class="navbar-brand" href="/" aria-label="Home">
                            <img src="/img/logo_icon.png" alt="Fronkon Games" height="40"></a>
                </div>
        
                
                <div class="d-flex align-items-center">
                    <button class="navbar-toggler main-nav-toggler collapsed p-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-0-collapse"
                        aria-controls="navbar-0" aria-expanded="false" aria-label="Toggle main navigation">
                        <span class="toggler-icon top-bar emphasis"></span>
                        <span class="toggler-icon middle-bar emphasis"></span>
                        <span class="toggler-icon bottom-bar emphasis"></span>
                    </button>
                </div>
            </div>
    
            <div class="navbar-collapse collapse" id="navbar-0-collapse">
                <div class="d-flex flex-fill ms-md-3">
    <form class="search flex-fill position-relative me-auto">
        <input class="search-input form-control is-search" type="search" placeholder="Search this site" aria-label="Search this site" autocomplete="off">
        <div class="search-suggestions shadow bg-body rounded d-none" data-no-results="No results for"></div>
    </form>
</div>

                <ul class="navbar-nav ms-auto">

                        <li class="nav-item">








    <a class="nav-link" 
        
        data-nav="main" data-nav-main="store" 
        href="/store/" ><strong><span >STORE</span></strong>&nbsp;</a>
</li>

                        <li class="nav-item">








    <a class="nav-link active" 
        
        data-nav="main" data-nav-main="projects" 
        href="/projects/" ><strong><span  class="active">PROJECTS</span></strong>&nbsp;</a>
</li>

                        <li class="nav-item">








    <a class="nav-link" 
        
        data-nav="main" data-nav-main="blog" 
        href="/blog/" ><strong><span >BLOG</span></strong>&nbsp;</a>
</li></ul>
            </div>
        </div>
    </nav>
</div>

<div class="main-content">
                    </div>
                
            </div>

            
                
    

    
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvass-sidebar" aria-inledby="offcanvas-label">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvas-label">Projects</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                

            </div>
        </div>
    

    <div class="container-xxl flex-fill p-4 px-xxl-0">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3">
                <div class="col col-lg-2 d-none d-lg-block sidebar-overflow sticky-top pt-5">
                    

                </div>
                <div class="col-12 col-md-9 col-lg-8 mb-5 p-4">
                    










    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                
                    <li class="breadcrumb-item"><a href="/projects/">Projects</a></li>
                
                    <li class="breadcrumb-item"><a href="/projects/kairos/">Kairos</a></li>
                <li class="breadcrumb-item active" aria-current="page">Drag &amp; Drop Cards üÉè</li>
        </ol>
    </nav>

    








<div class="d-md-none pb-5">






</div>



<center>
<video src="promo.mp4" type="video/mp4" loop="false" preload="auto" autoplay  class="video-shortcode">
  There should have been a video here but your browser does not seem
  to support it.
</video>
</center>
<br>










    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            All art in this post have been generated by an AI and do not represent the final style of the game
        </div>
    </div>
<p>Now that I have defined <a href="../rendering-a-card/">visually a card</a>, the next thing to do is to move it around the scene.</p>
<p>To do this we first have to detect the cards. We will do this using the &lsquo;<strong>Raycast</strong>&rsquo; functions, which <strong>fire</strong> rays that when colliding with an object give us information about it.</p>
<p>Since it is a performance consuming operation, we will use some tricks to optimize it. The first one is that we will create a <a href="https://docs.unity3d.com/Manual/use-layers.html">layer</a> to discard objects that are not involved in the operation. We will named it &lsquo;<strong>DragAndDrop</strong>&rsquo;.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-6 mx-auto"><img class="img-fluid "
            src="/projects/kairos/dragging-and-dropping-3d-cards/layers-2800x2408.jpg"
            
            
            srcset="/projects/kairos/dragging-and-dropping-3d-cards/layers-576x495.webp 576w, /projects/kairos/dragging-and-dropping-3d-cards/layers-768x660.webp 768w, /projects/kairos/dragging-and-dropping-3d-cards/layers-992x853.webp 992w, /projects/kairos/dragging-and-dropping-3d-cards/layers-1200x1032.webp 1200w, /projects/kairos/dragging-and-dropping-3d-cards/layers-1400x1204.webp 1400w, /projects/kairos/dragging-and-dropping-3d-cards/layers-2800x2408.webp 2800w" sizes="100vw"
            height="2408"
            width="2800"
            >
</div><br>
<p>We will also limit the ray length to the maximum distance our camera sees, since as a general rule we are not interested in objects we are not going to see. This distance is &lsquo;<strong>Camera.main.farClipPlane</strong>&rsquo;.</p>
<p>Since the &lsquo;<strong>Raycast</strong>&rsquo; operation is going to be used inside the &lsquo;<strong>Update</strong>&rsquo; loop (it is going to be executed every frame), it is always a good idea to avoid allocating memory if we can avoid it. So we will create a <a href="https://docs.unity3d.com/ScriptReference/Ray.html">Ray</a> and use the function <a href="https://docs.unity3d.com/ScriptReference/Physics.RaycastNonAlloc.html">Physics.RaycastNonAlloc</a>.</p>
<p>The code to detect the cards would look something like this:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="c1">// Layer of the objects to be detected.</span>
</span></span><span class="line"><span class="cl"><span class="na">  [SerializeField]</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">LayerMask</span> <span class="n">raycastMask</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// How many impacts of the beam we want to obtain.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="kd">const</span> <span class="kt">int</span> <span class="n">HitsCount</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Information on the impacts of shooting a ray.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="k">readonly</span> <span class="n">RaycastHit</span><span class="p">[]</span> <span class="n">raycastHits</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RaycastHit</span><span class="p">[</span><span class="n">HitsCount</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1">// Ray created from the camera to the projection of the mouse</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// coordinates on the scene.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Ray</span> <span class="n">mouseRay</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// Returns the Transfrom of the object closest to the origin</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// of the ray.</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;returns&gt;Transform or null if there is no impact.&lt;/returns&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Transform</span> <span class="n">MouseRaycast</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Transform</span> <span class="n">hit</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Fire the ray!</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">Physics</span><span class="p">.</span><span class="n">RaycastNonAlloc</span><span class="p">(</span><span class="n">mouseRay</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">raycastHits</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">farClipPlane</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">raycastMask</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// We order the impacts according to distance.</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="p">.</span><span class="n">Array</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">distance</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">distance</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// We are only interested in the first one.</span>
</span></span><span class="line"><span class="cl">      <span class="n">hit</span> <span class="p">=</span> <span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">transform</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">hit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>  </span></span></code></pre></div></div><p>Before calling this function, we must update &lsquo;<strong>mouseRay</strong>&rsquo; with the mouse coordinates. We will do it with this code:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="n">mouseRay</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenPointToRay</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span></span></span></code></pre></div></div>









    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            In this post I will use the old <a href="https://docs.unity3d.com/ScriptReference/Input.html">Input</a> for simplicity, but it is recommended to use the new <a href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.4/manual/QuickStartGuide.html">Input System</a>.
        </div>
    </div>
<p>In order to get all this to work on a card, we must first add a &lsquo;<a href="https://docs.unity3d.com/ScriptReference/Collider.html">Collider</a>&rsquo;. Without this component, our ray would pass through the card without detecting it. A &lsquo;<a href="https://docs.unity3d.com/Manual/class-BoxCollider.html">Box Collider</a>&rsquo; is a good choice for the type of geometry of a card, but if you need more precision you can use a &lsquo;<a href="https://docs.unity3d.com/Manual/class-MeshCollider.html">Mesh Collider</a>&rsquo;.</p>
<p>The second thing to do is to assign the &lsquo;<strong>layer</strong>&rsquo; we have selected to the chart. We are now ready to detect a card.</p>
<center>
  <img src="rayhit.gif" width="100%" height="100%"/>
</center>
<br>
<p>Now we can start moving our cards. First we are going to define two interfaces, the first one is <strong>IDrag</strong>, for objects that you can drag.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Draggable object.</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">interface</span> <span class="nc">IDrag</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Can it be draggable? &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">IsDraggable</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; A Drag operation is currently underway. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">Dragging</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Mouse enters the object. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnPointerEnter</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Mouse exits object. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnPointerExit</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Drag begins. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnBeginDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt;A drag is being made. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;deltaPosition&#34;&gt; Mouse offset position. &lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;droppable&#34;&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// Object on which a drop may be made, or null. &lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">deltaPosition</span><span class="p">,</span> <span class="n">IDrop</span> <span class="n">droppable</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; The drag operation is completed. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;droppable&#34;&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// Object on which a drop may be made, or null. &lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnEndDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">,</span> <span class="n">IDrop</span> <span class="n">droppable</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>And the second is <strong>IDrop</strong>, for objects that can accept IDrag objects.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Accept draggable objects.</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">interface</span> <span class="nc">IDrop</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Is it droppable? &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">IsDroppable</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Accept an IDrag? &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;drag&#34;&gt;Object IDrag.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;returns&gt;Accept or not the object.&lt;/returns&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">AcceptDrop</span><span class="p">(</span><span class="n">IDrag</span> <span class="n">drag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Performs the drop operation of an IDrag object. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;drag&#34;&gt;Object IDrag.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnDrop</span><span class="p">(</span><span class="n">IDrag</span> <span class="n">drag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>As you can see, it is <strong>IDrop</strong> that will authorize an <strong>IDrag</strong>, with its <strong>AcceptDrop</strong> method, whether or not to accept a drop operation to be executed on it.</p>
<p>With these two interfaces ready we can start with the one in charge of handling the drag and drop operations of our cards. We can call it &lsquo;<strong>DragAndDropManager</strong>&rsquo; and will be a <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.html">MonoBehaviour</a>. An operation of drag &amp; drop operation can be divided into:</p>
<ol>
<li>There is no drag operation at present.</li>
</ol>
<ul>
<li>Cards must be detected under the mouse pointer.
<ul>
<li>If a card is detected and the left mouse button is pressed, a drag operation is started and the <strong>OnBeginDrag</strong> method must be called.</li>
<li>If there is a detected card and no button is being pressed, the <strong>OnPointerEnter</strong> and <strong>OnPointerExit</strong> methods of the detected card are called.</li>
</ul>
</li>
</ul>
<ol start="2">
<li>A drag operation is in progress.</li>
</ol>
<ul>
<li>If the left mouse button is pressed, the card should be moved and the <strong>OnDrag</strong> method should be called.</li>
<li>If it is not, the drag operation must be finished and the <strong>OnEndDrag</strong> method must be called.</li>
</ul>










    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            All the code in this article is designed to move the cards in the XZ plane and use the Y axis for the height. If you use different axes you will have to modify the code.
        </div>
    </div>
<p>All this will have to be done in each frame, so it will be done inside the function &lsquo;<strong>Update</strong>&rsquo; of &lsquo;<strong>DragAndDropManager</strong>&rsquo;. We will use these variables:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="c1">// Height at which we want the card to be in a drag operation.</span>
</span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Range(0.0f, 10.0f)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">height</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Object to which we are doing a drag operation</span>
</span></span><span class="line"><span class="cl"><span class="c1">// or null if no drag operation currently exists.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">IDrag</span> <span class="n">currentDrag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// IDrag objects that the mouse passes over.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">IDrag</span> <span class="n">possibleDrag</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// To know the position of the drag object.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Transform</span> <span class="n">currentDragTransform</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// To calculate the mouse offset (in world-space).</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Vector3</span> <span class="n">oldMouseWorldPosition</span><span class="p">;</span></span></span></code></pre></div></div><p>Let&rsquo;s see how to detect an <strong>IDrag</strong>.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;Detects an IDrag object under the mouse.&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;returns&gt;IDrag or null.&lt;/returns&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">IDrag</span> <span class="n">DetectDraggable</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">IDrag</span> <span class="n">draggable</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">mouseRay</span> <span class="p">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">ScreenPointToRay</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">Transform</span> <span class="n">hit</span> <span class="p">=</span> <span class="n">MouseRaycast</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">hit</span> <span class="p">!=</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">draggable</span> <span class="p">=</span> <span class="n">hit</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">IDrag</span><span class="p">&gt;();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">draggable</span> <span class="k">is</span> <span class="p">{</span> <span class="n">IsDraggable</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="n">currentDragTransform</span> <span class="p">=</span> <span class="n">hit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="n">draggable</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">draggable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>Now there are two possibilities, that the left mouse button is pressed or not pressed. If it is pressed and there is an <strong>IDrag</strong> object under the mouse pointer:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">IDrag</span> <span class="n">draggable</span> <span class="p">=</span> <span class="n">DetectDraggable</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Left mouse button pressed?</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetMouseButtonDown</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">==</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Is there an IDrag object under the mouse pointer?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">draggable</span> <span class="p">!=</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We already have an object to start the drag operation!</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span> <span class="p">=</span> <span class="n">draggable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDragTransform</span> <span class="p">=</span> <span class="n">hit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">oldMouseWorldPosition</span> <span class="p">=</span> <span class="n">MousePositionToWorldPoint</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// Hide the mouse icon.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Cursor</span><span class="p">.</span><span class="n">visible</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// And we lock the movements to the window frame,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// so we can&#39;t move objects out of the camera&#39;s view.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Cursor</span><span class="p">.</span><span class="n">lockState</span> <span class="p">=</span> <span class="n">CursorLockMode</span><span class="p">.</span><span class="n">Confined</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// The drag operation begins.</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">Dragging</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">OnBeginDrag</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">height</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">.</span><span class="n">z</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>And if the left mouse button is not pressed:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="c1">// Left mouse button not pressed?</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetMouseButtonDown</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">==</span> <span class="kc">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// We pass over a new IDrag?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">draggable</span> <span class="p">!=</span> <span class="kc">null</span> <span class="p">&amp;&amp;</span> <span class="n">possibleDrag</span> <span class="p">==</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We execute its OnPointerEnter.</span>
</span></span><span class="line"><span class="cl">    <span class="n">possibleDrag</span> <span class="p">=</span> <span class="n">draggable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">possibleDrag</span><span class="p">.</span><span class="n">OnPointerEnter</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We are leaving an IDrag?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">draggable</span> <span class="p">==</span> <span class="kc">null</span> <span class="p">&amp;&amp;</span> <span class="n">possibleDrag</span> <span class="p">!=</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We execute its OnPointerExit.</span>
</span></span><span class="line"><span class="cl">    <span class="n">possibleDrag</span><span class="p">.</span><span class="n">OnPointerExit</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">possibleDrag</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>We already have the first part, now let&rsquo;s go for the second part: to handle a drag operation. The first thing we will do is a new method that will return the <strong>IDrop</strong> that is under a card. It&rsquo;s not as simple as &lsquo;<strong>DetectDraggable()</strong>&rsquo;, since a card has a surface and can be on several objects at once. We will need to cast four rays, one for each corner. And to choose one, we will order the<br />
hits by proximity to the center of the card, this way we will get the <strong>IDrop</strong> object that is on the card and is the closest to it.</p>
<p>We will store the rays hits in an array:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="c1">// Information on impacts from the corners of a card.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="k">readonly</span> <span class="n">RaycastHit</span><span class="p">[]</span> <span class="n">cardHits</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RaycastHit</span><span class="p">[</span><span class="m">4</span><span class="p">];</span></span></span></code></pre></div></div><p>And this is the method to search for the nearest IDrop:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;Detects an IDrop object under the mouse.&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;returns&gt;IDrop or null.&lt;/returns&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">IDrop</span> <span class="n">DetectDroppable</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">IDrop</span> <span class="n">droppable</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// The four corners of the card.</span>
</span></span><span class="line"><span class="cl">  <span class="n">Vector3</span> <span class="n">position</span> <span class="p">=</span> <span class="n">currentDragTransform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">Vector2</span> <span class="n">halfSize</span> <span class="p">=</span> <span class="n">cardSize</span> <span class="p">*</span> <span class="m">0.5f</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">Vector3</span><span class="p">[]</span> <span class="n">cardConner</span> <span class="p">=</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">z</span> <span class="p">-</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">z</span> <span class="p">+</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">z</span> <span class="p">-</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">z</span> <span class="p">+</span> <span class="n">halfSize</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">cardHitIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">cardHits</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We launch the four rays.</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">cardConner</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ray</span> <span class="n">ray</span> <span class="p">=</span> <span class="k">new</span><span class="p">(</span><span class="n">cardConner</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">down</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">Physics</span><span class="p">.</span><span class="n">RaycastNonAlloc</span><span class="p">(</span><span class="n">ray</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">raycastHits</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">Camera</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">farClipPlane</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">raycastMask</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// We order the impacts by distance from the origin of the ray.</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="p">.</span><span class="n">Array</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="n">x</span><span class="p">.</span><span class="n">distance</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">distance</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// We are only interested in the closest one.</span>
</span></span><span class="line"><span class="cl">      <span class="n">cardHits</span><span class="p">[</span><span class="n">cardHitIndex</span><span class="p">++]</span> <span class="p">=</span> <span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">cardHitIndex</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We are looking for the nearest possible IDrop.</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="p">.</span><span class="n">Array</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">cardHits</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="n">x</span><span class="p">.</span><span class="n">distance</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">distance</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">droppable</span> <span class="p">=</span> <span class="n">cardHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">IDrop</span><span class="p">&gt;();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">droppable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>Let&rsquo;s see it in action:</p>
<center>
  <img src="cardhits.gif" width="100%" height="100%"/>
</center>
<br>
<p>We can now proceed to the part where we handle a drag operation:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">currentDrag</span> <span class="p">!=</span> <span class="kc">null</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">IDrop</span> <span class="n">droppable</span> <span class="p">=</span> <span class="n">DetectDroppable</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Is the left mouse button held down?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetMouseButton</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">==</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Calculate the offset of the mouse with respect</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// to its previous position.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Vector3</span> <span class="n">mouseWorldPosition</span> <span class="p">=</span> <span class="n">MousePositionToWorldPoint</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">Vector3</span> <span class="n">offset</span> <span class="p">=</span> <span class="n">mouseWorldPosition</span> <span class="p">-</span> <span class="n">oldMouseWorldPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">offset</span> <span class="p">*=</span> <span class="n">dragSpeed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// OnDrag is executed.</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">OnDrag</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">droppable</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">oldMouseWorldPosition</span> <span class="p">=</span> <span class="n">mouseWorldPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="n">GetMouseButtonUp</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">==</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// The left mouse button is released and</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// the drag operation is finished.</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">Dragging</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span><span class="p">.</span><span class="n">OnEndDrag</span><span class="p">(</span><span class="n">raycastHits</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">point</span><span class="p">,</span> <span class="n">droppable</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDrag</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentDragTransform</span> <span class="p">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// We return the mouse icon to its normal state.</span>
</span></span><span class="line"><span class="cl">    <span class="n">Cursor</span><span class="p">.</span><span class="n">visible</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Cursor</span><span class="p">.</span><span class="n">lockState</span> <span class="p">=</span> <span class="n">CursorLockMode</span><span class="p">.</span><span class="n">None</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>We already have the complete manager, but if you look at the code it doesn&rsquo;t actually move anything. That&rsquo;s because it&rsquo;s the <strong>IDrag</strong> objects that are responsible for doing it. Let&rsquo;s see how they would be an object <strong>IDrag</strong>, which in our case is a card.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt; Card Drag. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="na">[RequireComponent(typeof(Collider))]</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">sealed</span> <span class="k">class</span> <span class="nc">CardDrag</span> <span class="p">:</span> <span class="n">MonoBehaviour</span><span class="p">,</span> <span class="n">IDrag</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">IsDraggable</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="kd">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">Dragging</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Position when the Drag starts.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Vector3</span> <span class="n">dragOriginPosition</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Unused for the moment.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnPointerEnter</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnPointerExit</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">)</span>  <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; Drag begins. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnBeginDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We store the current position, so that in case</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// the drag operation is not completed, the card</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// will return to its original position.</span>
</span></span><span class="line"><span class="cl">    <span class="n">dragOriginPosition</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// We raise the card to the height indicated by &#39;position&#39;.</span>
</span></span><span class="line"><span class="cl">    <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt;A drag is being made. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;deltaPosition&#34;&gt; Mouse offset position. &lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;droppable&#34;&gt;Object on which a drop may be made, or null.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">deltaPosition</span><span class="p">,</span> <span class="n">IDrop</span> <span class="n">droppable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// We ignore the displacement of the height.</span>
</span></span><span class="line"><span class="cl">    <span class="n">deltaPosition</span><span class="p">.</span><span class="n">y</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// We move the card.</span>
</span></span><span class="line"><span class="cl">    <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">+=</span> <span class="n">deltaPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;summary&gt; The drag operation is completed. &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;position&#34;&gt;Mouse position.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="cs">/// &lt;param name=&#34;droppable&#34;&gt;Object on which a drop may be made, or null.&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnEndDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">,</span> <span class="n">IDrop</span> <span class="n">droppable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// The IDrop object is active and accepts IDrag.</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">droppable</span> <span class="k">is</span> <span class="p">{</span> <span class="n">IsDroppable</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">        <span class="n">droppable</span><span class="p">.</span><span class="n">AcceptDrop</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">==</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                       <span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                       <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// There was no drop, we return to the original position.</span>
</span></span><span class="line"><span class="cl">      <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">dragOriginPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div>









    
    


    

<div class="d-flex alert alert-info " role="alert">
        <div class="pt-1 pe-2">









    

    <!-- <i class="fa fa-lightbulb fa-2x fa-fw"></i> --><svg class="svg-inline--fa fa fa-lightbulb fa-2x fa-fw" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 384 512"><path d="M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H226.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H272v16c0 44.2-35.8 80-80 80z"/></svg>

    &nbsp;
</div>
        <div class="flex-grow-1 my-auto">
            Remember that I am moving cards that do not have physics. In the case of objects with physics (with the <a href="https://docs.unity3d.com/es/2019.4/Manual/class-Rigidbody.html">RigidBody</a> component), the correct way to move them is using &lsquo;<a href="https://docs.unity3d.com/ScriptReference/Rigidbody.MovePosition.html">RigidBody.MovePosition</a>&rsquo; if it is <a href="https://docs.unity3d.com/ScriptReference/Rigidbody-isKinematic.html">Kinematic</a>, or using &lsquo;<a href="https://docs.unity3d.com/ScriptReference/Rigidbody.AddForce.html">RigidBody.AddForce</a>&rsquo; if it is not.
        </div>
    </div>
<p>We also need an <strong>IDrop</strong> object that will accept our traveling card. It is as simple as this:</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Accept draggable objects.</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">DroppableFloor</span> <span class="p">:</span> <span class="n">MonoBehaviour</span><span class="p">,</span> <span class="n">IDrop</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">IsDroppable</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We accept all IDrags.</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">bool</span> <span class="n">AcceptDrop</span><span class="p">(</span><span class="n">IDrag</span> <span class="n">drag</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="k">void</span> <span class="n">OnDrop</span><span class="p">(</span><span class="n">IDrag</span> <span class="n">drag</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>Let&rsquo;s take a look at a successful drag operation.</p>
<center>
  <img src="dragok.gif" width="100%" height="100%"/>
</center>
<br>
<p>And now one that does not, since one of the corners collides with an <strong>IDrag</strong> (another card) and this one is closer to the <strong>IDrop</strong> (the ground).</p>
<center>
  <img src="dragfail.gif" width="100%" height="100%"/>
</center>
<br>
<p>We already have the basics. Now let&rsquo;s improve it a bit. The first thing we can do is change the way we pick up and drop the cards. Now they do it instantly,<br />
they <strong>teleport</strong> to the position we tell them to. Instead we can use the velocity formula (velocity = space / time) to move with constant velocity the cards.<br />
We would have something like this:</p>
<center>
  <img src="draglinear.gif" width="100%" height="100%"/>
</center>
<br>
<p>Better, but still doesn&rsquo;t give a good feeling. Objects in real life do not reach a speed at instance, they have <a href="https://en.wikipedia.org/wiki/Inertia">inertia</a>. To make it similar in a simple way we can use <a href="https://easings.net/">Easing functions</a>, functions that interpolate values (values, vectors, colors, etc) using different curves.</p>
<center>
  <img src="easings.gif" width="90%" height="90%"/>
</center>
<br>
<p>There are many libraries with these functions. You may be interested in using my &lsquo;<a href="https://gist.github.com/FronkonGames/ae3d0d613ac4ea6738e288c0a490c020">Tiny Tween</a>&rsquo;, a simple to use library, very complete and in <strong>one file</strong>.</p>
<p>Let&rsquo;s change the way we pick up cards, using &lsquo;<a href="https://gist.github.com/FronkonGames/ae3d0d613ac4ea6738e288c0a490c020">Tiny Tween</a>&rsquo; to raise it to the height we want in a natural way.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">void</span> <span class="n">OnBeginDrag</span><span class="p">(</span><span class="n">Vector3</span> <span class="n">position</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">dragOriginPosition</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// While the card is being lifted, we do not want it to be draggable.</span>
</span></span><span class="line"><span class="cl">  <span class="n">IsDraggable</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// We create a Tween to change the height of the card.</span>
</span></span><span class="line"><span class="cl">  <span class="n">TweenFloat</span><span class="p">.</span><span class="n">Create</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Origin</span><span class="p">(</span><span class="n">dragOriginPosition</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>   <span class="c1">// Origin.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Destination</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>        <span class="c1">// Destination.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">riseDuration</span><span class="p">)</span>         <span class="c1">// Duration.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">EasingIn</span><span class="p">(</span><span class="n">riseEaseIn</span><span class="p">)</span>           <span class="c1">// Initial Easing function.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">EasingOut</span><span class="p">(</span><span class="n">riseEaseOut</span><span class="p">)</span>         <span class="c1">// Final Easing function.</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// This is where the position is modified.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">OnUpdate</span><span class="p">(</span><span class="n">tween</span> <span class="p">=&gt;</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">tween</span><span class="p">.</span><span class="n">Value</span><span class="p">,</span>      <span class="c1">// Only the height.</span>
</span></span><span class="line"><span class="cl">                  <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">OnEnd</span><span class="p">(</span><span class="n">_</span> <span class="p">=&gt;</span> <span class="n">IsDraggable</span> <span class="p">=</span> <span class="kc">true</span><span class="p">)</span> <span class="c1">// When finished,</span>
</span></span><span class="line"><span class="cl">                                    <span class="c1">// it becomes draggable again.</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>And this would be the result:</p>
<center>
  <img src="dragdrop.gif" width="100%" height="100%"/>
</center>
<br>
<p>Much better! And only adding one file! ;)</p>
<p>Let&rsquo;s apply the same change to how the card moves. Right now it&rsquo;s very static, it looks like it&rsquo;s moving in a vacuum. We can exaggerate the friction of a flexible object moving in the air and rotate the cards depending on their direction and speed. You may have seen this effect in games such as &lsquo;<a href="https://hearthstone.blizzard.com/">Hearthstone</a>&rsquo;.</p>
<p>We are going to modify the angles of the card according to its velocity vector. Specifically we will change the <strong>pitch</strong> and <strong>roll</strong>.</p>




















        
        
            
        
    

        
        
            
        
    

        
        
            
        
    





    
        
        
    

    
    





    
        
        
    






<div class="col-8 mx-auto"><img class="img-fluid "
            src="/projects/kairos/dragging-and-dropping-3d-cards/axis-2800x2106.jpg"
            
            
            srcset="/projects/kairos/dragging-and-dropping-3d-cards/axis-576x433.webp 576w, /projects/kairos/dragging-and-dropping-3d-cards/axis-768x578.webp 768w, /projects/kairos/dragging-and-dropping-3d-cards/axis-992x746.webp 992w, /projects/kairos/dragging-and-dropping-3d-cards/axis-1200x902.webp 1200w, /projects/kairos/dragging-and-dropping-3d-cards/axis-1400x1053.webp 1400w, /projects/kairos/dragging-and-dropping-3d-cards/axis-2800x2106.webp 2800w" sizes="100vw"
            height="2106"
            width="2800"
            >
</div><br>
<p>Each axis will have a <strong>force</strong> that will be applied to modify that axis. We will also limit the <strong>range</strong> of the angles. And finally a time that will be the time it takes for the axes to return to their original value.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="na">[Header(&#34;Pitch&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Force&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">pitchForce</span> <span class="p">=</span> <span class="m">10.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Minimum Angle&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">pitchMinAngle</span> <span class="p">=</span> <span class="p">-</span><span class="m">25.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Maximum Angle&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">pitchMaxAngle</span> <span class="p">=</span> <span class="m">25.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[Space]</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[Header(&#34;Roll&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Force&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">rollForce</span> <span class="p">=</span> <span class="m">10.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Minimum Angle&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">rollMinAngle</span> <span class="p">=</span> <span class="p">-</span><span class="m">25.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField, Label(&#34;Maximum Angle&#34;)]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">rollMaxAngle</span> <span class="p">=</span> <span class="m">25.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[Space]</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">[SerializeField]</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">restTime</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Pitch angle and velocity.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">pitchAngle</span><span class="p">,</span> <span class="n">pitchVelocity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Roll angle and velocity.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">float</span> <span class="n">rollAngle</span><span class="p">,</span> <span class="n">rollVelocity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// To calculate the velocity vector.</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Vector3</span> <span class="n">oldPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// The original rotation</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Vector3</span> <span class="n">originalAngles</span><span class="p">;</span></span></span></code></pre></div></div><p>In each frame we must calculate:</p>
<ul>
<li>The velocity vector, or offset, of the card.</li>
<li>Calculate the pitch and roll depending on each axis and its force (<strong>pitchForce</strong> and <strong>rollForce</strong>).</li>
<li>Limit the angles to the valid ranges.</li>
<li>Calculate the angles and over time (<strong>restTime</strong>) tend to zero.</li>
<li>Apply the angles to the rotation of the card.</li>
</ul>
<p>The offset vector is very simple, just subtract the current position from the position of the previous frame.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">Vector3</span> <span class="n">currentPosition</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Vector3</span> <span class="n">offset</span> <span class="p">=</span> <span class="n">currentPosition</span> <span class="p">-</span> <span class="n">oldPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">oldPosition</span> <span class="p">=</span> <span class="n">currentPosition</span><span class="p">;</span></span></span></code></pre></div></div><p>To rule out small vibrations, we will only calculate the angles when the modulus of <strong>offset</strong> is greater than <a href="https://docs.unity3d.com/ScriptReference/Mathf.Epsilon.html">Mathf.Epsilon</a> (which is a value very close to zero). And since we don&rsquo;t care about the actual value of the modulus, we will use <a href="https://docs.unity3d.com/ScriptReference/Vector3-sqrMagnitude.html">Vector3.sqrMagnitude</a> to avoid calculating a square root.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">offset</span><span class="p">.</span><span class="n">sqrMagnitude</span> <span class="p">&gt;</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">Epsilon</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">pitchAngle</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">Clamp</span><span class="p">(</span><span class="n">pitchAngle</span> <span class="p">+</span> <span class="n">offset</span><span class="p">.</span><span class="n">z</span> <span class="p">*</span> <span class="n">pitchForce</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">pitchMinAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="n">pitchMaxAngle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">rollAngle</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">Clamp</span><span class="p">(</span><span class="n">rollAngle</span> <span class="p">+</span> <span class="n">offset</span><span class="p">.</span><span class="n">x</span> <span class="p">*</span> <span class="n">rollForce</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="n">rollMinAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                          <span class="n">rollMaxAngle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div><p>We already have the value of each angle, now we want that little by little those values tend to be at rest (<strong>restTime</strong>). To do it we will use the function <a href="https://docs.unity3d.com/ScriptReference/Mathf.SmoothDamp.html">Mathf.SmoothDamp</a> that also smooths the changes.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">pitchAngle</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">SmoothDamp</span><span class="p">(</span><span class="n">pitchAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                              <span class="m">0.0f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                              <span class="k">ref</span> <span class="n">pitchVelocity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                              <span class="n">restTime</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">10.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">rollAngle</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="n">SmoothDamp</span><span class="p">(</span><span class="n">rollAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                             <span class="m">0.0f</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                             <span class="k">ref</span> <span class="n">rollVelocity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                             <span class="n">restTime</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span> <span class="p">*</span> <span class="m">10.0f</span><span class="p">);</span></span></span></code></pre></div></div><p>And now we only have to apply the angles to the rotation of the card.</p>
<div class="mb-3 syntax-highlight"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">transform</span><span class="p">.</span><span class="n">rotation</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="n">Euler</span><span class="p">(</span><span class="n">originalAngles</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">pitchAngle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                      <span class="n">originalAngles</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                      <span class="n">originalAngles</span><span class="p">.</span><span class="n">z</span> <span class="p">-</span> <span class="n">rollAngle</span><span class="p">);</span></span></span></code></pre></div></div><p>Let&rsquo;s see the result.</p>
<center>
  <img src="tilt.gif" width="100%" height="100%"/>
</center>
<br>
<p>Nice! That&rsquo;s all for now. In next posts we will see some useful objects for a card game such as: decks, slot, etc. In the meantime you can add some improvements like:</p>
<ul>
<li>Choose which Easing functions to use to pick up cards and drop them. I am using Quart/Back to pick them up and Quart/Bounce to drop them.</li>
<li>Add some dust particles when dropping a card.</li>
<li>Add a camera shake when dropping a card to give it more drama.</li>
<li>And&hellip; can you think of anything else? I&rsquo;d love to read about it in the comments.</li>
</ul>
<p class="h4">Until next time&hellip; 







    <span class="badge text-bg-secondary">stay gamedev, stay awesome!</span>
    <br><br>
</p>
<p class="h4">




















    

    <!-- <i class="fas fa-code "></i> --><svg class="svg-inline--fa fas fa-code " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 640 512"><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg>

    &nbsp;
<a href="https://gist.github.com/FronkonGames/e14d6f02fe90df7a2e212b11ee2f0a3c">Drag and Drop source code</a></p>



<div class="row row-cols-2 mt-5 mb-3">
    <div class="col">
        </div>
    <div class="col text-end">
        <a class="previous" href="/projects/kairos/rendering-a-card/">
                    Rendering A Card üñåÔ∏è&nbsp;









    

    <!-- <i class="fas fa-arrow-right "></i> --><svg class="svg-inline--fa fas fa-arrow-right " fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 448 512"><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg>

    

                </a></div>
</div>


                </div>
                <div class="col col-md-3 col-lg-2 d-none d-md-block pt-5">
                    
    


<div class="toc toc-sidebar mb-5 my-md-0 mb-lg-5 p-3 text-body-secondary sticky-top">
    

    
        
        








    </div>

                </div>
            </div>
        </div>

                <div class="container-xxl flex-fill p-4 px-xxl-0">

  
  <script
    src="https://giscus.app/client.js"
    data-repo="FronkonGames/fronkongames.github.io"
    data-repo-id="R_kgDOIyuXfQ"
    data-category="Comments"
    data-category-id="DIC_kwDOIyuXfc4Cf3OB"
    data-mapping="og:title"
    data-reactions-enabled="1"
    data-input-position="top"
    data-theme="dark"
    data-lang="en"
    data-loading="lazy"
    data-strict="1"
    crossorigin="anonymous"
    onload="document.body.dispatchEvent(new Event('giscus-load'))"
    async
  ></script></div>
                


<div class="container-fluid bg-primary bg-opacity-10">
        <div class="container-xxl px-4 px-xxl-0">
            <div class="row row-cols-2 py-3 align-items-center">
                <div class="col col-6">
                    <div class="row justify-content-end p-0">
                        <div class="col-12 col-md-8 p-0">
                            <div class="fs-3 fw-bold">Any questions or suggestions?</div>
                            <p>Just write an email to <a href="mailto:fronkongames@gmail.com">fronkongames@gmail.com</a></p>
                        </div>
                    </div>
                </div>
                <div class="col col-6 text-sm-start">
                    <a href="mailto:fronkongames@gmail.com"  target="_blank" rel="noopener noreferrer" aria-label="eMail" class="text-decoration-none link-secondary d-inline p-2">
                            
                                









    

    <!-- <i class="fa fa-envelope fa-2x"></i> --><svg class="svg-inline--fa fa fa-envelope fa-2x" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 512 512"><path d="M64 112c-8.8 0-16 7.2-16 16v22.1L220.5 291.7c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16H64zM48 212.2V384c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128C0 92.7 28.7 64 64 64H448c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"/></svg>

    &nbsp;

                            
                        </a>
                    <a href="https://www.linkedin.com/in/martinbr"  target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="text-decoration-none link-secondary d-inline p-2">
                            
                                









    

    <!-- <i class="fab fa-linkedin fa-2x"></i> --><svg class="svg-inline--fa fab fa-linkedin fa-2x" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

    &nbsp;

                            
                        </a>
                    <a href="https://x.com/fronkongames"  target="_blank" rel="noopener noreferrer" aria-label="Twitter" class="text-decoration-none link-secondary d-inline p-2">
                            
                                









    

    <!-- <i class="fab fa-twitter fa-2x"></i> --><svg class="svg-inline--fa fab fa-twitter fa-2x" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>

    &nbsp;

                            
                        </a>
                    <a href="https://github.com/FronkonGames"  target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="text-decoration-none link-secondary d-inline p-2">
                            
                                









    

    <!-- <i class="fab fa-github fa-2x"></i> --><svg class="svg-inline--fa fab fa-github fa-2x" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

    &nbsp;

                            
                        </a>
                    <a href="https://www.youtube.com/@fronkongames"  target="_blank" rel="noopener noreferrer" aria-label="Youtube" class="text-decoration-none link-secondary d-inline p-2">
                            
                                









    

    <!-- <i class="fab fa-youtube fa-2x"></i> --><svg class="svg-inline--fa fab fa-youtube fa-2x" fill="currentColor" aria-hidden="true" role="img" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>

    &nbsp;

                            
                        </a>
                    </div>
            </div>
        </div>
    </div>
<footer class="container-fluid footer text-center p-3">
    <div class="container-xxl text-center">
        <small>
            Copyright ¬© 2024 Fronkon Games
            
            
                
                
            
        </small>
    </div>
</footer>
        </div>

        <div id="toast-container" class="toast-container position-fixed bottom-0 end-0 p-3">







<div id="toast-copied-code-message" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
        <strong class="me-auto">Fronkon Games</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">Code copied to clipboard</div>
</div>
</div>

<script src="/js/main.bundle.min.6906f2156a8a72c021ec2f4af08c989cee43342575f8053f0c26ae73280e4f2d.js" integrity="sha256-aQbyFWqKcsAh7C9K8IyYnO5DNCV1&#43;AU/DCaucygOTy0=" crossorigin="anonymous" async></script>
    

    



</body>
</html>
